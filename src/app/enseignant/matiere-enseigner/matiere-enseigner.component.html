<app-gabarit pageTitle="Associé une matière à un enseignant">
  <div class="container-fuild">
    <div class="row">
      <div class="col-lg-12">
        <div class="bg-light">
          <div class="mb-5">
            <div class="col-lg-12 p-0">
              <div class="d-flex align-items-center">
                <input
                  type="text"
                  (keyup)="applyFilterEnseignant($event)"
                  placeholder="Recherchez un enseignant ici..."
                  class="form-control text-start text-uppercase"
                />
              </div>
            </div>
            <div class="mat-elevation-z8">
              <div style="max-height: 400px; overflow-y: auto">
                <table
                  mat-table
                  [dataSource]="dataSourceEnseignant"
                  *ngIf="!isLoading; else loader"
                >
                  <!-- Position Column -->
  
                  <ng-container matColumnDef="CodeEnseignant">
                    <th mat-header-cell *matHeaderCellDef>Code</th>
                    <td class="pointer" mat-cell *matCellDef="let element">
                      {{ element.CodeEnseignant }}
                    </td>
                  </ng-container>
  
                  <ng-container matColumnDef="Fr_Nom">
                    <th mat-header-cell *matHeaderCellDef>Nom</th>
                    <td class="pointer" mat-cell *matCellDef="let element">
                      {{ element.Fr_Nom }}
                    </td>
                  </ng-container>
  
                  <ng-container matColumnDef="Fr_Prenom">
                    <th mat-header-cell *matHeaderCellDef>prénom</th>
                    <td class="pointer" mat-cell *matCellDef="let element">
                      {{ element.Fr_Prenom }}
                    </td>
                  </ng-container>
  
                  <ng-container matColumnDef="Civilite">
                    <th
                      class="bg-color-primary"
                      mat-header-cell
                      *matHeaderCellDef
                    >
                      Sexe
                    </th>
                    <td class="pointer" mat-cell *matCellDef="let element">
                      {{ element.Civilite === 1 ? "M" : "F" }}
                    </td>
                  </ng-container>
  
                  <ng-container matColumnDef="cocher">
                    <th mat-header-cell *matHeaderCellDef>Cocher</th>
                    <td mat-cell *matCellDef="let element">
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          style="padding: 10px"
                          (click)="checkLineEnseignant(element)"
                          type="radio"
                          name="flexRadioDefault"
                          [checked]="element.isChecked"
                          id="flexRadioDefault1"
                        />
                      </div>
                    </td>
                  </ng-container>
  
                  <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
                  <tr
                    style="cursor: pointer"
                    mat-row
                    *matRowDef="let row; columns: displayedColumns1"
                  ></tr>
                </table>
              </div>
            </div>
          </div>
          <div class="p-3">
            <div class="row">
              <div class="col-lg-6">
                <p class="bg-white p-2 text-danger">Les matières enseignées par l'enseignant selectionné</p>
              </div>
              <div class="col-lg-6">
                <button
                  (click)="openModalMatiere()"
                  class="form-control bg-table-color text-white"
                >
                  Choisir une matière <i class="fa-solid fa-book"></i>
                </button>
              </div>
            </div>
            <div class="mat-elevation-z8">
              <div style="max-height: 300px; overflow-y: auto">
                <table
                  mat-table
                  [dataSource]="dataSource"
                  *ngIf="!isloadingMatiere; else loader"
                >
                  <!-- Position Column -->
  
                  <ng-container matColumnDef="Fr_CodeMatiere">
                    <th mat-header-cell *matHeaderCellDef>Code matière</th>
                    <td class="pointer" mat-cell *matCellDef="let element">
                      {{ element.Fr_CodeMatiere }}
                    </td>
                  </ng-container>
  
                  <ng-container matColumnDef="Fr_NomMatiere">
                    <th mat-header-cell *matHeaderCellDef>Nom matière</th>
                    <td class="pointer" mat-cell *matCellDef="let element">
                      {{ element.Fr_NomMatiere }}
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="Action">
                    <th mat-header-cell *matHeaderCellDef>Action</th>
                    <td class="pointer" mat-cell *matCellDef="let element">
                      <div style="padding-left: 10px;">
                        <i class="fa-sharp fs-6 text-danger fa-solid fa-trash" (click)="deleteline(element)"></i>
                      </div>
                    </td>
                  </ng-container>
  
                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr
                    style="cursor: pointer"
                    mat-row
                    *matRowDef="let row; columns: displayedColumns"
                  ></tr>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <ng-template #loader>
    <app-loader></app-loader>
   </ng-template>
</app-gabarit>

