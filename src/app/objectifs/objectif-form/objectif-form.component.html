<div class="container">
  <div class="col-12 res">
    <div class="card border-0">
      <app-close-modal></app-close-modal>
      <div class="card-body">
        <div class="row">
          <h3 class="card-title text-left" style="width: 26em">
            <h2 class="">
              {{ action === "view" ? "Fiche de l'objectif :" : "" }}
              {{ action === "edit" ? "Modifier l'objectif :" : "" }}
              <span class="text-danger">{{
                action === "view" || action === "edit" ? Libelle : ""
              }}</span>
              <span>{{ action === 'create' ? "Ajouter un objectif" : "" }}</span>
            </h2>
          </h3>
        </div>
        <form
          #natonaliteForm="ngForm"
          (ngSubmit)="onSubmitForm(natonaliteForm)"
          class="g-3 needs-validation"
          *ngIf="!isLoading; else loader"
        >
          <div class="row">
            <div class="col-lg-4">
              <div class="form-check">
                <input
                  name="EnseigneeP1"
                  [(ngModel)]="EnseigneeP1"
                  class="form-check-input"
                  type="checkbox"
                  [disabled]="action == 'view'"
                  id="flexCheckDefault"
                />
                <label class="form-check-label" for="flexCheckDefault">
                  Premier trimestre
                </label>
              </div>
            </div>
            <div class="col-lg-4">
              <div class="form-check">
                <input
                  name="EnseigneeP2"
                  [(ngModel)]="EnseigneeP2"
                  class="form-check-input"
                  type="checkbox"
                  [disabled]="action == 'view'"
                  id="flexCheckDefault"
                />
                <label class="form-check-label" for="flexCheckDefault">
                  Deuxième trimestre
                </label>
              </div>
            </div>
            <div class="col-lg-4">
              <div class="form-check">
                <input
                  name="EnseigneeP3"
                  [(ngModel)]="EnseigneeP3"
                  class="form-check-input"
                  type="checkbox"
                  [disabled]="action == 'view'"
                  id="flexCheckDefault"
                />
                <label class="form-check-label" for="flexCheckDefault">
                  Troisième trimestre
                </label>
              </div>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-lg-4">
              <label for="">Niveau</label>
              <select
                name="IDNIVEAU"
                [(ngModel)]="IDNIVEAU"
                class="form-select"
                (change)="selectNiveauID($event)"
                [disabled]="true"
              >
                <option *ngFor="let n of niveauList" [value]="n.IDNIVEAU">
                  {{ n.NomNiveau }}
                </option>
              </select>
            </div>

            <div class="col-lg-4">
              <label for="">Branche</label>
              <select
                name="IDBRANCHE"
                [(ngModel)]="IDBRANCHE"
                class="form-select"
                (change)="selectBrancheID($event)"
                [disabled]="true"
              >
                <option *ngFor="let b of brancheList" [value]="b.IDBRANCHE">
                  {{ b.NomBranche }}
                </option>
              </select>
            </div>

            <div class="col-lg-4">
              <label for="">Matière</label>
              <select
                name="IDMATIERE"
                [(ngModel)]="IDMATIERE"
                class="form-select"
                (change)="selectMatiereID($event)"
                [disabled]="action == 'view'"
                *ngIf="!isloadingmatiere; else loader"
              >
              <option
                  *ngFor="let matiere of matiereList"
                  [value]="matiere.IDMATIERE"
                >
                  {{ matiere.NomMatiere }}
                </option>
              </select>
            </div>
          </div>

          <div class="mt-3">
            <label for="">Votre objectif ici </label>
            <div class="form-floating">
              <textarea
                style="height: 80px !important"
                class="form-control"
                name="Libelle"
                [(ngModel)]="Libelle"
                id="floatingTextarea"
                [disabled]="action == 'view'"
              ></textarea>
            </div>
          </div>

          <div class="mt-3 m-auto" *ngIf="action != 'view'">
            <button
              type="submit"
              class="btn form-control btn-primary bg-primary text-light"
            >
              {{ action === "edit" ? "Modifier " : "Valider" }}
              <i class="fa-solid fa-arrows-rotate"></i>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<ng-template #loader>
  <app-loader></app-loader>
</ng-template>
