<app-gabarit pageTitle="Fiche de l'élève">
    <div
      class="container-fluid bg-light"
      *ngIf="!isLoadingDataStudent; else loader"
    >
      <mat-stepper class="" headerPosition="bottom" class="" #stepper>
        <mat-step [stepControl]="eleveInscritForm" class="">
          <ng-template matStepLabel>Informations générales</ng-template>
          <form [formGroup]="eleveInscritForm" class="w-100">
            <div class="tab-content">
              <div
                class="tab-pane fade show active"
                id="nestedContent1"
                role="tabpanel"
                aria-labelledby="nestedTab1"
              >
                <div class="content mt-3">
                  <span class="text-on-border fw-bold text-secondary-cust"
                    >Identités Elève</span
                  >
                  <div class="row">
                    <div
                      class="col-lg-4 text-center"
                      style="border-right: 1px solid rgb(237, 231, 231)"
                    >
                      <div
                        class="w-75 m-auto mt-4"
                        *ngIf="photo$ | async as photoobj; else loader"
                      >
                        <img
                          class="m-auto"
                          [src]="photoEleve ? photoEleve : photoobj.Photo"
                          style="
                            height: 200px !important;
                            width: 175px !important;
                          "
                          alt="image"
                        />
                      </div>
  
                      <div class="col-lg-8 m-auto">
                        <label for="validationCustom01" class="form-label mb-2"
                          >Photo de l'eleve</label
                        ><br />
                        <button
                          type="button"
                          (click)="openCropImage()"
                          class="btn btn-primary"
                        >
                          Choisir une photo
                        </button>
                      </div>
                      <div class="mt-4">
                        MATRICULE:
                        <strong class="text-secondary-cust">{{
                          eleveInscritForm.get("CodeEleve")?.value
                        }}</strong>
                      </div>
  
                      <section>
                        <div class="example-label mt-4">
                          Actions supplémentaires
                        </div>
                        <div class="d-flex justify-content-center flex-wrap">
                          <button
                            class="m-1"
                            [disabled]="dossierIsPrint"
                            (click)="printDoc(typeImpression.DOSSIER_ELEVE)"
                            mat-stroked-button
                          >
                            <app-loader
                              colorText="text-secondary"
                              *ngIf="dossierIsPrint; else dossiertext"
                            ></app-loader>
                            <ng-template #dossiertext
                              >Imprimez le dossier</ng-template
                            >
                          </button>
  
                          <button
                            class="m-1"
                            [disabled]="carteScolaireIsPrint"
                            (click)="printDoc(typeImpression.CARTE_SCOLAIRE)"
                            mat-stroked-button
                            color="primary"
                          >
                            <app-loader
                              colorText="text-secondary"
                              *ngIf="carteScolaireIsPrint; else cartetext"
                            ></app-loader>
                            <ng-template #cartetext
                              >Imprimez la carte scolaire</ng-template
                            >
                          </button>
  
                          <button
                            class="m-1"
                            mat-stroked-button
                            color="accent"
                            [routerLink]="'/frais/' + IDEleve"
                          >
                            Frais scolaires
                          </button>
                        </div>
                      </section>
                    </div>
                    <div class="col-lg-8">
                      <div class="row">
                        <div class="col-12">
                          <label
                            for="validationCustom01"
                            class="form-label mt-3"
                            *ngIf="action != 'edit'"
                            >Selectionner la nouvelle classe ici (<span
                              class="text-danger"
                              >*</span
                            >)
                          </label>
                          <!--input
                            [readonly]="action == 'view'"
                            type="text"
                            (click)="openTableClasse()"
                            [value]="eleveInscritForm.value.IDCLASSES ? 'Classe sélectionnée : ' + eleveInscritForm.get('textClasseValue')?.value : 'sélectionner une classe'"
                            class="form-control text-uppercase pointer form-select"
                          /-->
                          <div>
                            <button
                              [disabled]="action == 'view'"
                              class="continue-application w-100"
                              (click)="onChangeClass()"
                            >
                              <div>
                                <div class="pencil"></div>
                                <div class="folder">
                                  <div class="top">
                                    <svg viewBox="0 0 24 27">
                                      <path
                                        d="M1,0 L23,0 C23.5522847,-1.01453063e-16 24,0.44771525 24,1 L24,8.17157288 C24,8.70200585 23.7892863,9.21071368 23.4142136,9.58578644 L20.5857864,12.4142136 C20.2107137,12.7892863 20,13.2979941 20,13.8284271 L20,26 C20,26.5522847 19.5522847,27 19,27 L1,27 C0.44771525,27 6.76353751e-17,26.5522847 0,26 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z"
                                      ></path>
                                    </svg>
                                  </div>
                                  <div class="paper"></div>
                                </div>
                              </div>
                              <span
                                *ngIf="
                                  eleveInscritForm.value.IDCLASSES;
                                  else notifClass
                                "
                              >
                                {{
                                  eleveInscritForm.value.IDCLASSES
                                    ? "Classe actuelle : " +
                                      eleveInscritForm.get("textClasseValue")
                                        ?.value
                                    : "sélectionner une classe"
                                }}
                              </span>
                              <ng-template #notifClass>
                                <span class="animated-text">
                                  Cliquer ici pour sélectionner la classe ici
                                  <img
                                    style="width: 1em"
                                    alt="icon"
                                    src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGUlEQVR4nO2azW9MURiHDy0WWhY2Eq1QEaIRX2knjW78FZb+ki59h1IWXUoorRIJgqSVCBGR2Gkt7GgQFFVESXnk7fyunEzvnV4z904P+iQ3k3PmfLy/Oe97vu44t8A/CNAKdAMjwGc9I8prdaEDLAVOAdMkY9/1WFkXsIghGfsVOAG0A8v1FICTwJTKDAUphuJIGM+BrWXKbQPGVLbHBRgT0xqJGRFAEzAITOq5DGz0xEypzhYXChSD2Oj2RLyLiQ/LW6MyFifGcRcKwKiMalPaRsK4Zobrua68AZWxmDEeu1Cg6DpGQ0l65tdXXrPyJpRuVHrShQLwXkY1Kj1DTLnf+cBKJb+4UAAeyajCHwjpUHLUhQJwzJ9OUwo5reRRFwrABuAH8E1Ta1khwHbgu+q0uJAADsvIFymEvNTnIRcaQD1wwzO2nBA0Hde5EAHqgAMphOwPVoRPmmD/K+B/EQL0a99lzwCw3oUI6YLd560WyDOa0Sx9Yd6n5hRC4jaTcbwC1oUsJG4zmSTwpnbT46XnmnkXUoHAxHNNkEKS8ilzrsmVMoY9AO7E5D9MyGeuc00lxm2Wf74G3gBXku6oot4r6ihFO1TaPrDJOzz5WPB1ZtbR7HbuAXcza18LmHFLFws2vFc9Mbsz6Si9PTNUUjG6h2oq2e1e9MR0VN1RDYQ8U93mkvx6bTGMj5GYkIWcU11zp/oYMf2emELIQlq0siJ3ihNjeyNjIlghhs7ZkZhLwBI3+1B1NuokWCEGsNObhgdiRsbE9On7ny4nyOKHAnalEGPXQwerNTiJzEa8xM0GS8XkDVm6LrDDu3GvqRiyjsESMbNms7wgj8mk1mKAFdGalUfjbcAHdXA+zzsrivFpPMmrA19MX15igC710ZtH+1En7d7K3pe1m1F0KzsLGXuybDuus4In5jawKqN2F3mv9IazaDPtDmDMe129D1hc5UgMqr3xmt53Aat1wot4aq8RzCWAtcCyOeo3aEbs8txpvPQQVxPkDnslolqGQ7h5tP1XJ3AEuK+DWvRXjiQ+6bV3b+6BvYDLn1/4zplE4CPVdgAAAABJRU5ErkJggg=="
                                  />
                                </span>
                              </ng-template>
                            </button>
                          </div>
                        </div>
  
                        <div class="col-lg-4">
                          <label for="validationCustom01" class="form-label mt-3"
                            >Nom (<span class="text-danger">*</span>)
                          </label>
                          <input
                            [readonly]="action == 'view'"
                            [ngClass]="{
                              'is-valid':
                                eleveInscritForm.controls['Fr_Nom'].valid,
                              'is-invalid':
                                !eleveInscritForm.controls['Fr_Nom'].valid
                            }"
                            type="text"
                            class="form-control text-uppercase"
                            (input)="onInputNomOrPrenom()"
                            formControlName="Fr_Nom"
                          />
                          <div
                            [ngClass]="{
                              'valid-feedback':
                                eleveInscritForm.controls['Fr_Nom'].valid,
                              'invalid-feedback':
                                !eleveInscritForm.controls['Fr_Nom'].valid
                            }"
                          >
                            {{
                              action !== 'view' ?
                              !eleveInscritForm.controls["Fr_Nom"].valid
                                ? "Renseignez le Nom."
                                : "ok." : ''
                            }}
                          </div>
                        </div>
  
                        <div class="col-lg-4 mt-3">
                          <label for="validationCustom01" class="form-label"
                            >Prenom (<span class="text-danger">*</span>)</label
                          >
                          <input
                            [readonly]="action == 'view'"
                            type="text"
                            (input)="onInputNomOrPrenom()"
                            class="form-control text-capitalize"
                            formControlName="Fr_Prenom"
                            [ngClass]="{
                              'is-valid':
                                eleveInscritForm.controls['Fr_Prenom'].valid,
                              'is-invalid':
                                !eleveInscritForm.controls['Fr_Prenom'].valid
                            }"
                          />
  
                          <div
                            [ngClass]="{
                              'valid-feedback':
                                eleveInscritForm.controls['Fr_Prenom'].valid,
                              'invalid-feedback':
                                !eleveInscritForm.controls['Fr_Prenom'].valid
                            }"
                          >
                            {{
                              action !== 'view' ?
                              !eleveInscritForm.controls["Fr_Prenom"].valid
                                ? "Renseignez le prénom."
                                : "ok." : ''
                            }}
                          </div>
                        </div>
  
                        <div class="col-lg-4 mt-3">
                          <label for="validationCustom01" class="form-label"
                            >Sexe (<span class="text-danger">*</span>)</label
                          >
                          <select
                            formControlName="Civilite"
                            class="form-control form-select"
                            aria-label="Default select example"
                            [ngClass]="{
                              'is-valid':
                                eleveInscritForm.controls['Civilite'].valid,
                              'is-invalid':
                                !eleveInscritForm.controls['Civilite'].valid
                            }"
                          >
                            <option disabled>choisir votre civilité</option>
                            <option value="1">M</option>
                            <option value="2">F</option>
                          </select>
                          <div
                            [ngClass]="{
                              'valid-feedback':
                                eleveInscritForm.controls['Civilite'].valid,
                              'invalid-feedback':
                                !eleveInscritForm.controls['Civilite'].valid
                            }"
                          >
                            {{ action !== 'view' ?
                              !eleveInscritForm.controls["Civilite"].valid
                                ? "Sélectionnez le sexe."
                                : "ok." : ''
                            }}
                          </div>
                        </div>
  
                        <div class="col-lg-4 mt-3">
                          <label for="validationCustom01" class="form-label"
                            >Date de Naissance (<span class="text-danger">*</span
                            >)</label
                          >
                          <input
                            type="date"
                            class="form-control"
                            formControlName="DateNaissance"
                            [ngClass]="{
                              'is-valid':
                                eleveInscritForm.controls['DateNaissance'].valid,
                              'is-invalid':
                                !eleveInscritForm.controls['DateNaissance'].valid
                            }"
                          />
                          <div
                            [ngClass]="{
                              'valid-feedback':
                                eleveInscritForm.controls['DateNaissance'].valid,
                              'invalid-feedback':
                                !eleveInscritForm.controls['DateNaissance'].valid
                            }"
                          >
                            {{
                              action !== 'view' ?
                              !eleveInscritForm.controls["DateNaissance"].valid
                                ? "Renseignez la date de naissance."
                                : "ok." : ''
                            }}
                          </div>
                        </div>
  
                        <div class="col-lg-4 mt-3">
                          <label for="validationCustom01" class="form-label"
                            >Departement de naissance (<span class="text-danger"
                              >*</span
                            >)</label
                          >
                          <div
                          >
                          <input
                          [readonly]="action == 'view'"
                          type="text"
                          (input)="onInputNomOrPrenom()"
                          class="form-control text-capitalize"
                          formControlName="Fr_Departement"
                          [ngClass]="{
                            'is-valid':
                              eleveInscritForm.controls['Fr_Departement'].valid,
                            'is-invalid':
                              !eleveInscritForm.controls['Fr_Departement'].valid
                          }"
                        />
                    </div>
                        </div>
  
                        <div class="col-lg-4 mt-3">
                          <label for="validationCustom01" class="form-label"
                            >Lieu de naissance (<span class="text-danger">*</span
                            >)
                          </label>
  
                          <div
                          >
                          <input
                          [readonly]="action == 'view'"
                          type="text"
                          (input)="onInputNomOrPrenom()"
                          class="form-control text-capitalize"
                          formControlName="Fr_LieuNaissance"
                          [ngClass]="{
                            'is-valid':
                              eleveInscritForm.controls['Fr_LieuNaissance'].valid,
                            'is-invalid':
                              !eleveInscritForm.controls['Fr_LieuNaissance'].valid
                          }"
                        />
                          </div>
                        </div>
                        <div class="col-lg-4 mt-3">
                          <label for="validationCustom01" class="form-label"
                            >Nationalité (<span class="text-danger">*</span>)
                          </label>
  
                          <div class="d-flex align-items-center">
                            <input
                            [readonly]="action == 'view'"
                            type="text"
                            (input)="onInputNomOrPrenom()"
                            class="form-control text-capitalize"
                            formControlName="Nationalite"
                            [ngClass]="{
                              'is-valid':
                                eleveInscritForm.controls['Nationalite'].valid,
                              'is-invalid':
                                !eleveInscritForm.controls['Nationalite'].valid
                            }"
                          />                          </div>
                        </div>
  
                        <div class="col-lg-4 mt-3">
                          <label for="validationCustom01" class="form-label"
                            >Etat sanitaire (<span class="text-danger">*</span>)
                          </label>
  
                          <div class="d-flex align-items-center">
                            <input
                            [readonly]="action == 'view'"
                            type="text"
                            (input)="onInputNomOrPrenom()"
                            class="form-control text-capitalize"
                            formControlName="EtatSanitaire"
                            [ngClass]="{
                              'is-valid':
                                eleveInscritForm.controls['EtatSanitaire'].valid,
                              'is-invalid':
                                !eleveInscritForm.controls['EtatSanitaire'].valid
                            }"
                          /> 
                          </div>
                        </div>
                        <div class="col-lg-4 mt-3">
                          <label for="validationCustom01" class="form-label"
                            >Status
                          </label>
  
                          <div class="d-flex align-items-center">
                            <input
                            [readonly]="action == 'view'"
                            type="text"
                            (input)="onInputNomOrPrenom()"
                            class="form-control text-capitalize"
                            formControlName="Statut"
                            [ngClass]="{
                              'is-valid':
                                eleveInscritForm.controls['Statut'].valid,
                              'is-invalid':
                                !eleveInscritForm.controls['Statut'].valid
                            }"
                          /> 
                          </div>
                        </div>
  
                        <div class="col-lg-4 mt-3">
                          <label for="validationCustom01" class="form-label"
                            >Nouveau/Ancien (<span class="text-danger">*</span>)
                          </label>

                          <input
                          [readonly]="action == 'view'"
                          type="text"
                          (input)="onInputNomOrPrenom()"
                          class="form-control text-capitalize"
                          formControlName="NouveauDansAnneeCourante"
                          [ngClass]="{
                            'is-valid':
                              eleveInscritForm.controls['NouveauDansAnneeCourante'].valid,
                            'is-invalid':
                              !eleveInscritForm.controls['NouveauDansAnneeCourante'].valid
                          }"
                        /> 
  
                        </div>
                        <div class="col-lg-4 mt-3">
                          <label for="validationCustom01" class="form-label"
                            >Redoublant/Non Redoublant (<span class="text-danger"
                              >*</span
                            >)
                          </label>
                          <input
                          [readonly]="action == 'view'"
                          type="text"
                          (input)="onInputNomOrPrenom()"
                          class="form-control text-capitalize"
                          formControlName="Redoublant"
                          [ngClass]="{
                            'is-valid':
                              eleveInscritForm.controls['Redoublant'].valid,
                            'is-invalid':
                              !eleveInscritForm.controls['Redoublant'].valid
                          }"
                        /> 
                        </div>
  
                        <div class="col-lg-4 mt-3">
                          <label for="validationCustom01" class="form-label"
                            >Identifiant Scolaire unique
                          </label>
  
                          <input
                            [readonly]="action == 'view'"
                            type="text"
                            class="form-control"
                            formControlName="IdentifiantNational"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
  
                <div class="row mt-5">
                  <div class="col-lg-6">
                    <div class="content">
                      <span class="text-on-border fw-bold text-secondary-cust"
                        >ngues Vivantes</span
                      >
  
                      <div
                        *ngIf="
                          langueVivantes$ | async as langueVivantes;
                          else loader
                        "
                      >
                        <div class="col-lg-12 pt-3">
                          <label for="validationCustom01" class="form-label"
                            >Première langue
                          </label>
  
                          <div class="d-flex align-items-center">
                            <div class="input-group">
                              <input
                                type="text"
                                class="form-control form-select"
                                #langue1Input
                                [value]="
                                  eleveInscritForm.get('LangueVivante1')?.value
                                "
                                [matAutocomplete]="langue1"
                                [ngClass]="{
                                  'is-valid':
                                    eleveInscritForm.controls['LangueVivante1']
                                      .valid,
                                  'is-invalid':
                                    !eleveInscritForm.controls['LangueVivante1']
                                      .valid
                                }"
                              />
                            </div>
  
                            <mat-autocomplete #langue1>
                              <mat-option
                                *ngFor="
                                  let lang of filterElement(
                                    langueVivantes,
                                    langue1Input.value,
                                    'Fr_Libelle'
                                  )
                                "
                                (click)="
                                  eleveInscritForm
                                    .get('IDLangueVivante1')
                                    ?.setValue(lang.IDLANGUE);
                                  eleveInscritForm
                                    .get('LangueVivante1')
                                    ?.setValue(lang.Fr_Libelle)
                                "
                                >{{ lang.Fr_Libelle }}</mat-option
                              >
                              <mat-option>
                                <span
                                  class="input-group-text bg-success text-white"
                                  (click)="openPremieierelangueDialog()"
                                  id="basic-addon1"
                                  >Ajouter une langue vivante<i
                                    class="fa-solid fa-plus"
                                  ></i
                                ></span>
                              </mat-option>
                            </mat-autocomplete>
                          </div>
  
                          <div
                            [ngClass]="{
                              'text-danger':
                                !eleveInscritForm.controls['LangueVivante1']
                                  .valid,
                              'text-success':
                                eleveInscritForm.controls['LangueVivante1'].valid
                            }"
                          >
                            {{
                              action !== 'view' ?
                              !eleveInscritForm.controls["LangueVivante1"].valid
                                ? "Renseignez une langue."
                                : "ok." : ''
                            }}
                          </div>
                        </div>
  
                        <div class="col-lg-12 pt-3">
                          <label for="validationCustom01" class="form-label"
                            >Deuxième langue
                          </label>
                          <div class="d-flex align-items-center">
                            <div class="input-group">
                              <input
                                type="text"
                                class="form-control form-select"
                                #langue2Input
                                [value]="
                                  eleveInscritForm.get('LangueVivante2')?.value
                                "
                                [matAutocomplete]="langue2"
                                [ngClass]="{
                                  'is-valid':
                                    eleveInscritForm.controls['LangueVivante2']
                                      .valid,
                                  'is-invalid':
                                    !eleveInscritForm.controls['LangueVivante2']
                                      .valid
                                }"
                              />
                            </div>
                          </div>
                          <mat-autocomplete #langue2>
                            <mat-option
                              *ngFor="
                                let lang of filterElement(
                                  langueVivantes,
                                  langue2Input.value,
                                  'Fr_Libelle'
                                )
                              "
                              (click)="
                                eleveInscritForm
                                  .get('IDLangueVivante2')
                                  ?.setValue(lang.IDLANGUE);
                                eleveInscritForm
                                  .get('LangueVivante2')
                                  ?.setValue(lang.Fr_Libelle)
                              "
                              >{{ lang.Fr_Libelle }}</mat-option
                            >
  
                            <mat-option>
                              <span
                                class="input-group-text bg-success text-white"
                                (click)="openDeuxiemelangueDialog()"
                                id="basic-addon1"
                                >Ajouter une langue<i class="fa-solid fa-plus"></i
                              ></span>
                            </mat-option>
                          </mat-autocomplete>
                          <div
                            [ngClass]="{
                              'text-danger':
                                !eleveInscritForm.controls['LangueVivante2']
                                  .valid,
                              'text-success':
                                eleveInscritForm.controls['LangueVivante2'].valid
                            }"
                          >
                            {{
                              action !== 'view' ?
                              !eleveInscritForm.controls["LangueVivante2"].valid
                                ? "Renseignez une langue."
                                : "ok." : ''
                            }}
                          </div>
                        </div>
  
                        <div class="col-lg-12 pt-3">
                          <label for="validationCustom01" class="form-label"
                            >Troisième langue
                          </label>
                          <div class="d-flex align-items-center">
                            <div class="input-group">
                              <input
                                type="text"
                                class="form-control form-select"
                                #langue3Input
                                [value]="
                                  eleveInscritForm.get('LangueVivante3')?.value
                                "
                                [matAutocomplete]="langue3"
                                [ngClass]="{
                                  'is-valid':
                                    eleveInscritForm.controls['LangueVivante3']
                                      .valid,
                                  'is-invalid':
                                    !eleveInscritForm.controls['LangueVivante3']
                                      .valid
                                }"
                              />
  
                              <mat-autocomplete #langue3>
                                <mat-option
                                  *ngFor="
                                    let lang of filterElement(
                                      langueVivantes,
                                      langue3Input.value,
                                      'Fr_Libelle'
                                    )
                                  "
                                  (click)="
                                    eleveInscritForm
                                      .get('IDLangueVivante3')
                                      ?.setValue(lang.IDLANGUE);
                                    eleveInscritForm
                                      .get('LangueVivante3')
                                      ?.setValue(lang.Fr_Libelle)
                                  "
                                  >{{ lang.Fr_Libelle }}</mat-option
                                >
                                <mat-option>
                                  <span
                                    class="input-group-text bg-success text-white"
                                    (click)="openDeuxiemelangueDialog()"
                                    id="basic-addon1"
                                    >Ajouter une langue sanitaire<i
                                      class="fa-solid fa-plus"
                                    ></i
                                  ></span>
                                </mat-option>
                              </mat-autocomplete>
                            </div>
                          </div>
                          <div
                            [ngClass]="{
                              'text-danger':
                                !eleveInscritForm.controls['LangueVivante3']
                                  .valid,
                              'text-success':
                                eleveInscritForm.controls['LangueVivante3'].valid
                            }"
                          >
                            {{
                              action !== 'view' ?
                              !eleveInscritForm.controls["LangueVivante3"].valid
                                ? "Renseignez une langue."
                                : "ok." : ''
                            }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="content">
                      <span class="text-on-border fw-bold text-secondary-cust"
                        >Localisation</span
                      >
  
                      <div class="col-lg-12">
                        <label for="validationCustom01" class="form-label mt-3"
                          >Departement de résidence
                        </label>
                        <div
                          *ngIf="departementsList$ | async as departementsList"
                        >
                          <input
                            type="text"
                            class="form-control form-select"
                            (click)="
                              eleveInscritForm
                                .get('DepartementResidence')
                                ?.setValue('')
                            "
                            #departementsInput
                            [matAutocomplete]="departements"
                            formControlName="DepartementResidence"
                            [ngClass]="{
                              'is-valid':
                                eleveInscritForm.controls['DepartementResidence']
                                  .valid,
                              'is-invalid':
                                !eleveInscritForm.controls['DepartementResidence']
                                  .valid
                            }"
                          />
                          <div
                            [ngClass]="{
                              'valid-feedback':
                                eleveInscritForm.controls['DepartementResidence']
                                  .valid,
                              'invalid-feedback':
                                !eleveInscritForm.controls['DepartementResidence']
                                  .valid
                            }"
                          >
                            {{
                              action !== 'view' ?
                              !eleveInscritForm.controls["DepartementResidence"]
                                .valid
                                ? "Renseignez le département de résidence."
                                : "ok." : ''
                            }}
                          </div>
                          <mat-autocomplete #departements>
                            <mat-option
                              *ngFor="
                                let departement of filterElement(
                                  departementsList,
                                  departementsInput.value,
                                  'NomDepartement'
                                )
                              "
                              (click)="
                                eleveInscritForm
                                  .get('DepartementResidence')
                                  ?.setValue(departement.NomDepartement)
                              "
                              >{{ departement.NomDepartement }}</mat-option
                            >
                          </mat-autocomplete>
                        </div>
                      </div>
  
                      <div class="col-lg-12">
                        <label for="validationCustom01" class="form-label mt-3"
                          >Arrondissement
                        </label>
                        <input
                          [readonly]="action == 'view'"
                          type="text"
                          class="form-control form-select"
                          formControlName="Fr_Arrondissement"
                          [ngClass]="{
                            'is-valid':
                              eleveInscritForm.controls['Fr_Arrondissement']
                                .valid,
                            'is-invalid':
                              !eleveInscritForm.controls['Fr_Arrondissement']
                                .valid
                          }"
                        />
                        <div
                          [ngClass]="{
                            'text-danger':
                              !eleveInscritForm.controls['Fr_Arrondissement']
                                .valid,
                            'text-success':
                              eleveInscritForm.controls['Fr_Arrondissement'].valid
                          }"
                        >
                          {{
                            action !== 'view' ?
                            !eleveInscritForm.controls["Fr_Arrondissement"].valid
                              ? "Renseignez l'arrondissement."
                              : "ok." : ''
                          }}
                        </div>
                      </div>
  
                      <div class="col-lg-12">
                        <label for="validationCustom01" class="form-label mt-3"
                          >Ville
                        </label>
                        <input
                          [readonly]="action == 'view'"
                          type="text"
                          class="form-control form-select"
                          formControlName="Fr_Ville"
                          [ngClass]="{
                            'is-valid':
                              eleveInscritForm.controls['Fr_Ville'].valid,
                            'is-invalid':
                              !eleveInscritForm.controls['Fr_Ville'].valid
                          }"
                        />
                        <div
                          [ngClass]="{
                            'text-danger':
                              !eleveInscritForm.controls['Fr_Ville'].valid,
                            'text-success':
                              eleveInscritForm.controls['Fr_Ville'].valid
                          }"
                        >
                          {{
                            action !== 'view' ?
                            !eleveInscritForm.controls["Fr_Ville"].valid
                              ? "Renseignez une ville."
                              : "ok." : ''
                          }}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
  
                <div class="row mt-5">
                  <div class="col-lg-6">
                    <div class="content mt-3">
                      <span class="text-on-border fw-bold text-secondary-cust"
                        >Identifications</span
                      >
  
                      <div class="col-lg-12">
                        <label for="validationCustom01" class="form-label mt-3"
                          >Email
                        </label>
                        <input
                          [readonly]="action == 'view'"
                          type="text"
                          class="form-control"
                          formControlName="Courriel"
                          [ngClass]="{
                            'is-valid':
                              eleveInscritForm.controls['Courriel'].valid,
                            'is-invalid':
                              !eleveInscritForm.controls['Courriel'].valid
                          }"
                        />
                        <div
                          [ngClass]="{
                            'text-danger':
                              !eleveInscritForm.controls['Courriel'].valid,
                            'text-success':
                              eleveInscritForm.controls['Courriel'].valid
                          }"
                        >
                          {{
                            action !== 'view' ?
                            !eleveInscritForm.controls["Courriel"].valid
                              ? "Renseignez un email."
                              : "ok." : ''
                          }}
                        </div>
                      </div>
  
                      <div class="col-lg-12">
                        <label for="validationCustom01" class="form-label mt-3"
                          >Mobile
                        </label>
                        <input
                          [readonly]="action == 'view'"
                          type="text"
                          class="form-control"
                          formControlName="TelMobile"
                          [ngClass]="{
                            'is-valid':
                              eleveInscritForm.controls['TelMobile'].valid,
                            'is-invalid':
                              !eleveInscritForm.controls['TelMobile'].valid
                          }"
                        />
                        <div
                          [ngClass]="{
                            'text-danger':
                              !eleveInscritForm.controls['TelMobile'].valid,
                            'text-success':
                              eleveInscritForm.controls['TelMobile'].valid
                          }"
                        >
                          {{
                            action !== 'view' ?
                            !eleveInscritForm.controls["TelMobile"].valid
                              ? "Renseignez un mobile."
                              : "ok." : ''
                          }}
                        </div>
                      </div>
  
                      <div class="col-lg-12">
                        <label for="validationCustom01" class="form-label mt-3"
                          >Numéro CNI
                        </label>
                        <input
                          [readonly]="action == 'view'"
                          type="text"
                          class="form-control"
                          formControlName="NumCNI"
                          [ngClass]="{
                            'is-valid': eleveInscritForm.controls['NumCNI'].valid,
                            'is-invalid':
                              !eleveInscritForm.controls['NumCNI'].valid
                          }"
                        />
                        <div
                          [ngClass]="{
                            'text-danger':
                              !eleveInscritForm.controls['NumCNI'].valid,
                            'text-success':
                              eleveInscritForm.controls['NumCNI'].valid
                          }"
                        >
                          {{
                            action !== 'view' ?
                            !eleveInscritForm.controls["NumCNI"].valid
                              ? "Renseignez le numéro CNI."
                              : "ok." : ''
                          }}
                        </div>
                      </div>
  
                      <div class="col-lg-12">
                        <label for="validationCustom01" class="form-label mt-3"
                          >ID carte (badge)
                        </label>
                        <input
                          [readonly]="action == 'view'"
                          type="text"
                          class="form-control"
                          formControlName="IdentifiantBadge"
                          [ngClass]="{
                            'is-valid':
                              eleveInscritForm.controls['IdentifiantBadge'].valid,
                            'is-invalid':
                              !eleveInscritForm.controls['IdentifiantBadge'].valid
                          }"
                        />
                        <div
                          [ngClass]="{
                            'text-danger':
                              !eleveInscritForm.controls['IdentifiantBadge']
                                .valid,
                            'text-success':
                              eleveInscritForm.controls['IdentifiantBadge'].valid
                          }"
                        >
                          {{
                            action !== 'view' ?
                            !eleveInscritForm.controls["IdentifiantBadge"].valid
                              ? "Renseignez un identifiant de badge."
                              : "ok." : ''
                          }}
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="content mt-3">
                      <span class="text-on-border fw-bold text-secondary-cust"
                        >Autres parametres</span
                      >
  
                      <div class="col-lg-12 mt-3">
                        <label for="validationCustom01" class="form-label"
                          >Cycle
                        </label>
  
                        <div
                          class="d-flex align-items-center"
                          *ngIf="cycleList$ | async as cycleList; else loader"
                        >
                          <input
                            type="text"
                            class="form-control form-select"
                            #cycleInput
                            (click)="eleveInscritForm.get('Cycle')?.setValue('')"
                            [value]="eleveInscritForm.get('Cycle')?.value"
                            [matAutocomplete]="cycles"
                            formControlName="Cycle"
                            [ngClass]="{
                              'is-valid':
                                eleveInscritForm.controls['Cycle'].valid,
                              'is-invalid':
                                !eleveInscritForm.controls['Cycle'].valid
                            }"
                          />
                          <mat-autocomplete #cycles>
                            <mat-option
                              *ngFor="
                                let cycle of filterElement(
                                  cycleList,
                                  cycleInput.value,
                                  'Libelle'
                                )
                              "
                              (click)="
                                eleveInscritForm
                                  .get('IDCYCLES')
                                  ?.setValue(cycle.IDCYCLES);
                                eleveInscritForm
                                  .get('Cycle')
                                  ?.setValue(cycle.Libelle)
                              "
                              >{{ cycle.Libelle }}</mat-option
                            >
                          </mat-autocomplete>
                        </div>
                        <div
                          [ngClass]="{
                            'text-danger':
                              !eleveInscritForm.controls['Cycle'].valid,
                            'text-success':
                              eleveInscritForm.controls['Cycle'].valid
                          }"
                        >
                          {{
                            action !== 'view' ?
                            !eleveInscritForm.controls["Cycle"].valid
                              ? "Sélectionnez un cycle."
                              : "ok." : ''
                          }}
                        </div>
                      </div>
  
                      <div class="col-lg-12 mt-3">
                        <label for="validationCustom01" class="form-label"
                          >Site d'affectation
                        </label>
                        <div class="d-flex align-items-center">
                          <div
                            class="input-group mb-3"
                            *ngIf="siteList$ | async as siteList"
                          >
                            <input
                              type="text"
                              class="form-control form-select"
                              #siteInput
                              (click)="eleveInscritForm.get('Site')?.setValue('')"
                              [value]="eleveInscritForm.get('Site')?.value"
                              [matAutocomplete]="sites"
                              [ngClass]="{
                                'is-valid':
                                  eleveInscritForm.controls['Site'].valid,
                                'is-invalid':
                                  !eleveInscritForm.controls['Site'].valid
                              }"
                            />
  
                            <mat-autocomplete #sites>
                              <mat-option
                                *ngFor="
                                  let site of filterElement(
                                    siteList,
                                    siteInput.value,
                                    'Libelle'
                                  )
                                "
                                (click)="
                                  eleveInscritForm
                                    .get('IDSITE')
                                    ?.setValue(site.IDSITE);
                                  eleveInscritForm
                                    .get('Site')
                                    ?.setValue(site.Libelle)
                                "
                                >{{ site.Libelle }}</mat-option
                              >
                              <mat-option>
                                <span
                                  class="input-group-text bg-success text-white"
                                  (click)="openSiteDialog()"
                                  id="basic-addon1"
                                  >Ajouter un site<i class="fa-solid fa-plus"></i
                                ></span>
                              </mat-option>
                            </mat-autocomplete>
                          </div>
                        </div>
                        <div
                          [ngClass]="{
                            'text-danger':
                              !eleveInscritForm.controls['Site'].valid,
                            'text-success':
                              eleveInscritForm.controls['Site'].valid
                          }"
                        >
                          {{
                            action !== 'view' ?
                            !eleveInscritForm.controls["Site"].valid
                              ? "Sélectionnez un site."
                              : "ok." : ''
                          }}
                        </div>
                      </div>
  
                      <div class="col-lg-12">
                        <label for="validationCustom01" class="form-label"
                          >Etablissement d'origine
                        </label>
  
                        <div
                          class="border"
                          *ngIf="etablissementList$ | async as etablissementList"
                        >
                          <input
                            type="text"
                            class="form-control form-select"
                            (click)="
                              eleveInscritForm
                                .get('EtablissementProvenance')
                                ?.setValue('')
                            "
                            #etsOrigine
                            [value]="
                              eleveInscritForm.get('EtablissementProvenance')
                                ?.value
                            "
                            [matAutocomplete]="etsList"
                            [ngClass]="{
                              'is-valid':
                                eleveInscritForm.controls[
                                  'EtablissementProvenance'
                                ].valid,
                              'is-invalid':
                                !eleveInscritForm.controls[
                                  'EtablissementProvenance'
                                ].valid
                            }"
                          />
                          <mat-autocomplete #etsList>
                            <mat-option
                              *ngFor="
                                let ets of filterElement(
                                  etablissementList,
                                  etsOrigine.value,
                                  'Fr_Nom'
                                )
                              "
                              (click)="
                                eleveInscritForm
                                  .get('EtablissementOrigine')
                                  ?.setValue(ets.IDETABLISSEMENTS);
                                eleveInscritForm
                                  .get('EtablissementProvenance')
                                  ?.setValue(ets.Fr_Nom)
                              "
                              >{{ ets.Fr_Nom }}</mat-option
                            >
                          </mat-autocomplete>
                        </div>
                        <div
                          [ngClass]="{
                            'text-danger':
                              !eleveInscritForm.controls[
                                'EtablissementProvenance'
                              ].valid,
                            'text-success':
                              eleveInscritForm.controls['EtablissementProvenance']
                                .valid
                          }"
                        >
                          {{
                            action !== 'view' ?
                            !eleveInscritForm.controls["EtablissementProvenance"]
                              .valid
                              ? "Renseignez un établissement d'origine."
                              : "ok." : ''
                          }}
                        </div>
                      </div>
  
                      <div class="col-lg-12 mt-3">
                        <label for="validationCustom01" class="form-label"
                          >Année BEPC
                        </label>
                        <input
                          [readonly]="action == 'view'"
                          type="date"
                          class="form-control"
                          formControlName="BEPC_Annee"
                          [ngClass]="{
                            'is-valid':
                              eleveInscritForm.controls['BEPC_Annee'].valid,
                            'is-invalid':
                              !eleveInscritForm.controls['BEPC_Annee'].valid
                          }"
                        />
                        <div
                          [ngClass]="{
                            'text-danger':
                              !eleveInscritForm.controls['BEPC_Annee'].valid,
                            'text-success':
                              eleveInscritForm.controls['BEPC_Annee'].valid
                          }"
                        >
                          {{
                            action !== 'view' ?
                            !eleveInscritForm.controls["BEPC_Annee"].valid
                              ? "Renseignez une année pour le BEPC."
                              : "ok." : ''
                          }}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
  
                <div class="row mt-5">
                  <div class="col-lg-6">
                    <div class="content mt-3">
                      <span class="text-on-border fw-bold text-secondary-cust"
                        >Paramètres Divers</span
                      >
  
                      <div class="row mt-3">
                        <div class="col-lg-4">
                          <div class="form-check m-auto">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              formControlName="Boursier"
                              id="flexCheckDefault"
                            />
                            <label class="form-check-label"> Boursier </label>
                          </div>
                        </div>
  
                        <div class="col-lg-4">
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              formControlName="ExempteDuSport"
                              id="flexCheckDefault"
                            />
                            <label class="form-check-label">
                              Exempte Du Sport
                            </label>
                          </div>
                        </div>
  
                        <div class="col-lg-4">
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              value=""
                              id="flexCheckDefault"
                              formControlName="bPleinTemps"
                            />
                            <label class="form-check-label"> Plein Temps </label>
                          </div>
                        </div>
  
                        <div class="col-lg-4">
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              value=""
                              id="flexCheckDefault"
                              formControlName="bMarie"
                            />
                            <label class="form-check-label"> Marie </label>
                          </div>
                        </div>
  
                        <div class="col-lg-4">
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              formControlName="Travailleur"
                              id="flexCheckDefault"
                            />
                            <label class="form-check-label"> Travailleur </label>
                          </div>
                        </div>
  
                        <div class="col-lg-4">
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              id="flexCheckDefault"
                              formControlName="ParentsDivorces"
                            />
                            <label class="form-check-label">
                              Parents Divorces
                            </label>
                          </div>
                        </div>
  
                        <div class="col-lg-4">
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              formControlName="FraisInscriptionPayes"
                              id="flexCheckDefault"
                            />
                            <label class="form-check-label">
                              Frais Inscription Payes
                            </label>
                          </div>
                        </div>
  
                        <div class="col-lg-4">
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              value=""
                              id="flexCheckDefault"
                            />
                            <label class="form-check-label">
                              Frais Inscription Payes
                            </label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div
                      class="content mt-3"
                      [ngClass]="{
                        'border-danger':
                          eleveInscritForm.get('SMS_ParentParDefaut')?.value < 1,
                        'border-success':
                          eleveInscritForm.get('SMS_ParentParDefaut')?.value > 0
                      }"
                    >
                      <span class="text-on-border fw-bold text-secondary-cust"
                        >Par défaut . Envoyer les sms Alerte parents (<span
                          class="text-danger"
                          >*</span
                        >)
                      </span>
  
                      <div class="row mt-3">
                        <div class="col-lg-12">
                          <div class="form-check m-auto">
                            <input
                              class="form-check-input"
                              type="radio"
                              formControlName="SMS_ParentParDefaut"
                              [value]="1"
                              [checked]="
                                eleveInscritForm.get('SMS_ParentParDefaut')
                                  ?.value == '1'
                              "
                              id="flexCheckDefault"
                            />
                            <label class="form-check-label"> Au père </label>
                          </div>
                        </div>
  
                        <div class="col-lg-6">
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="radio"
                              formControlName="SMS_ParentParDefaut"
                              [checked]="
                                eleveInscritForm.get('SMS_ParentParDefaut')
                                  ?.value == '2'
                              "
                              [value]="2"
                              id="flexCheckDefault"
                            />
                            <label class="form-check-label"> A la mère </label>
                          </div>
                        </div>
  
                        <div class="col-lg-6">
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="radio"
                              formControlName="SMS_ParentParDefaut"
                              [value]="3"
                              [checked]="
                                eleveInscritForm.get('SMS_ParentParDefaut')
                                  ?.value == '3'
                              "
                              id="flexCheckDefault"
                            />
                            <label class="form-check-label"> Au tuteur </label>
                          </div>
                        </div>
  
                        <div class="col-lg-6">
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="radio"
                              formControlName="SMS_ParentParDefaut"
                              [checked]="
                                eleveInscritForm.get('SMS_ParentParDefaut')
                                  ?.value == '4'
                              "
                              [value]="4"
                              id="flexCheckDefault"
                            />
                            <label class="form-check-label"> A l'élève </label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="tab-pane fade"
                id="nestedContent2"
                role="tabpanel"
                aria-labelledby="nestedTab2"
              >
                <app-reduction-exoneration
                  [IDELEVE]="IDEleve"
                ></app-reduction-exoneration>
              </div>
            </div>
          </form>
          <div class="d-flex justify-content-end">
            <button mat-button matStepperNext>
              <i class="fa-solid fa-angle-double-right text-secondary-cust"></i>
              <span class="text-secondary-cust">Suivant</span>
            </button>
          </div>
        </mat-step>
  
        <mat-step [stepControl]="eleveInscritForm">
          <ng-template matStepLabel>Informations supplémentaires</ng-template>
          <form [formGroup]="eleveInscritForm">
            <div class="row mt-3">
              <div class="col-lg-3">
                <label for="validationCustom01" class="form-label"
                  >Nom Prenom Tuteur (<span class="text-danger">*</span>)</label
                >
                <input
                  [readonly]="action == 'view'"
                  type="text"
                  class="form-control text-capitalize"
                  formControlName="Fr_NomPrenomTuteur"
                  [ngClass]="{
                    'is-valid':
                      eleveInscritForm.controls['Fr_NomPrenomTuteur'].valid,
                    'is-invalid':
                      !eleveInscritForm.controls['Fr_NomPrenomTuteur'].valid
                  }"
                />
                <div
                  [ngClass]="{
                    'valid-feedback':
                      eleveInscritForm.controls['Fr_NomPrenomTuteur'].valid,
                    'invalid-feedback':
                      !eleveInscritForm.controls['Fr_NomPrenomTuteur'].valid
                  }"
                >
                  {{
                    action !== 'view' ?
                    !eleveInscritForm.controls["Fr_NomPrenomTuteur"].valid
                      ? "Renseignez le Nom et prénom du tuteur."
                      : "ok." : ''
                  }}
                </div>
              </div>
  
              <div class="col-lg-3">
                <label for="validationCustom01" class="form-label"
                  >Profession Tuteur</label
                >
                <div *ngIf="professionList$ | async as fonctionList; else loader">
                  <input
                    type="text"
                    class="form-control form-select"
                    (click)="
                      eleveInscritForm.get('ProfessionTuteur')?.setValue('')
                    "
                    #fonctionInput1
                    [matAutocomplete]="profession"
                    formControlName="ProfessionTuteur"
                  />
                  <mat-autocomplete #profession>
                    <mat-option
                      *ngFor="
                        let item of filterElement(
                          fonctionList,
                          fonctionInput1.value,
                          'Fr_Libelle'
                        )
                      "
                      (click)="
                        eleveInscritForm
                          .get('ProfessionTuteur')
                          ?.setValue(item.Fr_Libelle);
                        eleveInscritForm
                          .get('IDProfessionTuteur')
                          ?.setValue(item.IDPROFESSION)
                      "
                      >{{ item.Fr_Libelle }}</mat-option
                    >
                  </mat-autocomplete>
                </div>
              </div>
  
              <div class="col-lg-3">
                <label for="validationCustom01" class="form-label"
                  >Email Tuteur</label
                >
                <input
                  [readonly]="action == 'view'"
                  type="text"
                  class="form-control"
                  formControlName="EmailTuteur"
                />
              </div>
  
              <div class="col-lg-3">
                <label for="validationCustom01" class="form-label"
                  >Téléphone Tuteur</label
                >
                <input
                  [readonly]="action == 'view'"
                  type="text"
                  class="form-control"
                  formControlName="TelMobileTuteur"
                  [ngClass]="{
                    'is-valid':
                      eleveInscritForm.controls['TelMobileTuteur'].valid,
                    'is-invalid':
                      !eleveInscritForm.controls['TelMobileTuteur'].valid
                  }"
                />
                <div
                  [ngClass]="{
                    'text-success':
                      eleveInscritForm.controls['TelMobileTuteur'].valid,
                    'text-danger':
                      !eleveInscritForm.controls['TelMobileTuteur'].valid
                  }"
                >
                  {{
                    action !== 'view' ?
                    !eleveInscritForm.controls["TelMobileTuteur"].valid
                      ? "Renseignez le numéro de téléphone du tuteur."
                      : "ok." : ''
                  }}
                </div>
              </div>
            </div>
  
            <div class="row mt-3">
              <div class="col-lg-3">
                <label for="validationCustom01" class="form-label"
                  >Nom Prenom pere
                </label>
                <input
                  [readonly]="action == 'view'"
                  type="text"
                  class="form-control text-capitalize"
                  formControlName="Fr_NomPrenomPere"
                  [ngClass]="{
                    'is-valid':
                      eleveInscritForm.controls['Fr_NomPrenomPere'].valid,
                    'is-invalid':
                      !eleveInscritForm.controls['Fr_NomPrenomPere'].valid
                  }"
                />
                <div
                  [ngClass]="{
                    'valid-feedback':
                      eleveInscritForm.controls['Fr_NomPrenomPere'].valid,
                    'invalid-feedback':
                      !eleveInscritForm.controls['Fr_NomPrenomPere'].valid
                  }"
                >
                  {{
                    action !== 'view' ?
                    !eleveInscritForm.controls["Fr_NomPrenomPere"].valid
                      ? "Renseignez le Nom et prénom du père."
                      : "ok." : ''
                  }}
                </div>
              </div>
  
              <div class="col-lg-3">
                <label for="validationCustom01" class="form-label"
                  >Profession pere</label
                >
                <div *ngIf="professionList$ | async as fonctionList; else loader">
                  <input
                    type="text"
                    class="form-control form-select"
                    (click)="eleveInscritForm.get('ProfessionPere')?.setValue('')"
                    #fonctionInput2
                    [matAutocomplete]="professionpere"
                    formControlName="ProfessionPere"
                  />
                  <mat-autocomplete #professionpere>
                    <mat-option
                      *ngFor="
                        let item of filterElement(
                          fonctionList,
                          fonctionInput2.value,
                          'Fr_Libelle'
                        )
                      "
                      (click)="
                        eleveInscritForm
                          .get('ProfessionPere')
                          ?.setValue(item.Fr_Libelle);
                        eleveInscritForm
                          .get('IDProfessionPere')
                          ?.setValue(item.IDPROFESSION)
                      "
                      >{{ item.Fr_Libelle }}</mat-option
                    >
                  </mat-autocomplete>
                </div>
              </div>
  
              <div class="col-lg-3">
                <label for="validationCustom01" class="form-label"
                  >Email pere</label
                >
                <input
                  [readonly]="action == 'view'"
                  type="text"
                  class="form-control"
                  formControlName="EmailPere"
                />
              </div>
  
              <div class="col-lg-3">
                <label for="validationCustom01" class="form-label"
                  >Téléphone père</label
                >
                <input
                  [readonly]="action == 'view'"
                  type="text"
                  class="form-control"
                  formControlName="TelMobilePere"
                  [ngClass]="{
                    'is-valid': eleveInscritForm.controls['TelMobilePere'].valid,
                    'is-invalid':
                      !eleveInscritForm.controls['TelMobilePere'].valid
                  }"
                />
                <div
                  [ngClass]="{
                    'valid-feedback':
                      eleveInscritForm.controls['TelMobilePere'].valid,
                    'invalid-feedback':
                      !eleveInscritForm.controls['TelMobilePere'].valid
                  }"
                >
                  {{
                    action !== 'view' ?
                    !eleveInscritForm.controls["TelMobilePere"].valid
                      ? "Renseignez le téléphone du père."
                      : "ok." : ''
                  }}
                </div>
              </div>
            </div>
  
            <div class="row mt-3">
              <div class="col-lg-3">
                <label for="validationCustom01" class="form-label"
                  >Nom Prenom mère</label
                >
                <input
                  [readonly]="action == 'view'"
                  type="text"
                  class="form-control text-capitalize"
                  formControlName="Fr_NomPrenomMere"
                  [ngClass]="{
                    'is-valid':
                      eleveInscritForm.controls['Fr_NomPrenomMere'].valid,
                    'is-invalid':
                      !eleveInscritForm.controls['Fr_NomPrenomMere'].valid
                  }"
                />
                <div
                  [ngClass]="{
                    'valid-feedback':
                      eleveInscritForm.controls['Fr_NomPrenomMere'].valid,
                    'invalid-feedback':
                      !eleveInscritForm.controls['Fr_NomPrenomMere'].valid
                  }"
                >
                  {{
                    action !== 'view' ?
                    !eleveInscritForm.controls["Fr_NomPrenomMere"].valid
                      ? "Renseignez le Nom et prénom de la mère."
                      : "ok." : ''
                  }}
                </div>
              </div>
  
              <div class="col-lg-3">
                <label for="validationCustom01" class="form-label"
                  >Profession mère
                </label>
                <div *ngIf="professionList$ | async as fonctionList; else loader">
                  <input
                    type="text"
                    class="form-control form-select"
                    (click)="eleveInscritForm.get('ProfessionMere')?.setValue('')"
                    #fonctionInput3
                    [matAutocomplete]="professionmere"
                    formControlName="ProfessionMere"
                  />
                  <mat-autocomplete #professionmere>
                    <mat-option
                      *ngFor="
                        let item of filterElement(
                          fonctionList,
                          fonctionInput3.value,
                          'Fr_Libelle'
                        )
                      "
                      (click)="
                        eleveInscritForm
                          .get('ProfessionMere')
                          ?.setValue(item.Fr_Libelle);
                        eleveInscritForm
                          .get('IDProfessionMere')
                          ?.setValue(item.IDPROFESSION)
                      "
                      >{{ item.Fr_Libelle }}</mat-option
                    >
                  </mat-autocomplete>
                </div>
              </div>
  
              <div class="col-lg-3">
                <label for="validationCustom01" class="form-label"
                  >Email mère</label
                >
                <input
                  [readonly]="action == 'view'"
                  type="text"
                  class="form-control"
                  formControlName="EmailMere"
                />
              </div>
  
              <div class="col-lg-3">
                <label for="validationCustom01" class="form-label"
                  >Téléphone mère</label
                >
                <input
                  [readonly]="action == 'view'"
                  type="text"
                  class="form-control"
                  formControlName="TelMobileMere"
                  [ngClass]="{
                    'is-valid': eleveInscritForm.controls['TelMobileMere'].valid,
                    'is-invalid':
                      !eleveInscritForm.controls['TelMobileMere'].valid
                  }"
                />
                <div
                  [ngClass]="{
                    'valid-feedback':
                      eleveInscritForm.controls['TelMobileMere'].valid,
                    'invalid-feedback':
                      !eleveInscritForm.controls['TelMobileMere'].valid
                  }"
                >
                  {{
                    action !== 'view' ?
                    !eleveInscritForm.controls["TelMobileMere"].valid
                      ? "Renseignez le téléphone de la mère."
                      : "ok." : ''
                  }}
                </div>
              </div>
            </div>
  
            <div class="row mt-3">
              <div class="col-lg-3">
                <label for="validationCustom01" class="form-label"
                  >Nombre Freres</label
                >
                <input
                  [readonly]="action == 'view'"
                  type="number"
                  class="form-control"
                  formControlName="NombreFreres"
                />
              </div>
  
              <div class="col-lg-3">
                <label for="validationCustom01" class="form-label"
                  >Nombre Soeurs</label
                >
                <input
                  [readonly]="action == 'view'"
                  type="number"
                  class="form-control"
                  formControlName="NombreSoeurs"
                />
              </div>
  
              <div class="col-lg-3">
                <label for="validationCustom01" class="form-label"
                  >Situation Sociale
                </label>
                <input
                  [readonly]="action == 'view'"
                  type="text"
                  class="form-control form-select"
                  disabled
                />
              </div>
              <div class="col-lg-3">
                <div class="">
                  <label for="validationCustom01" class="form-label"
                    >Adresse (<span class="text-danger">*</span>)
                  </label>
                  <input
                    [readonly]="action == 'view'"
                    type="text"
                    class="form-control"
                    formControlName="Fr_Adresse1"
                    [ngClass]="{
                      'is-valid': eleveInscritForm.controls['Fr_Adresse1'].valid,
                      'is-invalid':
                        !eleveInscritForm.controls['Fr_Adresse1'].valid
                    }"
                  />
                  <div
                    [ngClass]="{
                      'valid-feedback':
                        eleveInscritForm.controls['Fr_Adresse1'].valid,
                      'invalid-feedback':
                        !eleveInscritForm.controls['Fr_Adresse1'].valid
                    }"
                  >
                    {{
                      action !== 'view' ?
                      !eleveInscritForm.controls["Fr_Adresse1"].valid
                        ? "Renseignez l'adresse."
                        : "ok." : ''
                    }}
                  </div>
                </div>
              </div>
            </div>
          </form>
          <div class="d-flex justify-content-end">
            <button mat-button matStepperPrevious>
              <span class="text-secondary-cust">Précédant</span>
              <i class="fa-solid fa-angle-double-left text-secondary-cust"></i>
            </button>
            <button mat-button matStepperNext>
              <i class="fa-solid fa-angle-double-right text-secondary-cust"></i>
              <span class="text-secondary-cust">Suivant</span>
            </button>
          </div>
        </mat-step>
  
        <mat-step>
          <ng-template matStepLabel>Informations comptables</ng-template>
       
          
          <!-- <app-reduction-exoneration
            [IDELEVE]="IDEleve"
          ></app-reduction-exoneration> -->
          <div class="d-flex justify-content-end">
            <button mat-button matStepperPrevious>
              <i class="fa-solid fa-angle-double-left text-secondary-cust"></i>
              <span class="text-secondary-cust">Précédant</span>
            </button>
          </div>
          <div>
            <div class="container-fuild m-3">
              <div class=" p-3 shadow rounded rounded-5" style="background-color: rgb(211, 210, 210);">
                <div *ngIf="infoEleve">
                 <div class="row">
                  <div class="col-lg-12">
                      <p class="fw-bold blockinfoEleve mrgblockinfoEleve">
                        <span>Historique de paiement de l'élève : </span>
                        <span class="text-danger">{{ infoEleve.Nom }}</span>
                        <span class="text-danger">{{ infoEleve.Prenom }}</span>
                      </p>
      
                      <p class="fw-bold blockinfoEleve mrgblockinfoEleve">
                        <span>Matricule : </span>
                        <span class="text-danger">{{
                          infoEleve.Matricule
                        }}</span>
                      </p>
  
                      <p class="fw-bold blockinfoEleve mrgblockinfoEleve">
                        <span>Total à payer : </span>
                        <span class="text-danger">{{
                          GlobalService.formatPrix(infoEleve.Total_A_Payer)
                        }}</span>
                      </p>
                      
                      <p class="fw-bold blockinfoEleve mrgblockinfoEleve">
                        <span>Total dèjà Payé : </span>
                        <span class="text-danger">{{
                          GlobalService.formatPrix(infoEleve.Total_Deja_Paye)
                        }}</span>
                      </p>
                      <p class="fw-bold blockinfoEleve mrgblockinfoEleve">
                        <span>Reste à payer : </span>
                        <span class="text-danger">{{
                          GlobalService.formatPrix(infoEleve.Reste_A_Payer)
                        }}</span>
                      </p>
                      <p class="fw-bold blockinfoEleve mrgblockinfoEleve">
                        <span>Total impayé : </span>
                        <span class="text-danger">{{
                          GlobalService.formatPrix(infoEleve.Total_Impaye)
                        }}</span>
                      </p>
                  </div>
                  <div class="row">
                    <div class="col-lg-4 mt-1">
                      <button  (click)="ViewHistoriquePaiement()" class=" bg-table-color  text-white form-control">Voir l'historique de paiement <i class="fa-solid fa-eye"></i></button>
                    </div>
                    <div class="col-lg-8">
                      <button class="form-control bg-table-color text-white" (click)="OpenPaiement()">Gestion des frais Scolaire</button>
                    </div>
                  </div>
                 </div>
                </div>
              </div>
     
            </div>
          </div>
        </mat-step>
      </mat-stepper>
      <div class="pb-5">
        <div class="mx-4 my-3">
          <button
            type="submit"
            *ngIf="!updateIsLoading; else loader"
            [disabled]="updateIsLoading || eleveInscritForm.invalid"
            class="btn-custom btn w-100"
            (click)="onSubmitForm()"
          >
            <i class="fa-solid fa-check text-light"></i>
            Enregistrer
          </button>
        </div>
      </div>
    </div>
  </app-gabarit>
  
  <ng-template #loader>
    <app-loader></app-loader>
  </ng-template>
  