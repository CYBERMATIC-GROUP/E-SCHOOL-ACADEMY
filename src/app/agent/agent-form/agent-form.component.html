<app-gabarit>
  <div *ngIf="!isLaoding; else loader">
    <form [formGroup]="agentForm" class="bg-light">
      <mat-stepper headerPosition="bottom" #stepper>
        <mat-step>
          <ng-template matStepLabel>Informations Générales</ng-template>
          <div class="mt-1">
            <div class="row mb-5">
              <div class="col-lg-4 text-center">
                <div
                  class="w-100 h-100 bloc-photo-card d-flex justify-content-center"
                >
                  <div class="m-auto" *ngIf="photo$ | async as imgobj">
                    <img
                      class="m-auto"
                      [src]="photo ? photo : imgobj.Photo"
                      style="height: 200px !important; width: 175px !important"
                      alt="image"
                    />
                    <div class="m-auto">
                      <label
                        for="validationCustom01"
                        class="form-label label mb-2"
                        >Photo de l'agent</label
                      >

                      <br />
                      <button
                        type="button"
                        (click)="openCropImage()"
                        class="btn btn-primary"
                      >
                        Choisir une photo
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-lg-8">
                <div class="row">
                  <div class="col-lg-4">
                    <label
                      for="validationCustom01"
                      class="form-label label mt-1"
                      >Nom (<span class="text-danger">*</span>)</label
                    >
                    <input
                      [readonly]="action == 'view'"
                      [ngClass]="{
                        'is-valid': agentForm.controls['Fr_Nom'].valid,
                        'is-invalid': !agentForm.controls['Fr_Nom'].valid
                      }"
                      type="text"
                      class="form-control hauteur hauteur text-uppercase"
                      name="Fr_Nom"
                      formControlName="Fr_Nom"
                    />
                    <div
                      [ngClass]="{
                        'valid-feedback': agentForm.controls['Fr_Nom'].valid,
                        'invalid-feedback': !agentForm.controls['Fr_Nom'].valid
                      }"
                    >
                      {{
                        !agentForm.controls["Fr_Nom"].valid
                          ? "Renseignez le Nom."
                          : ""
                      }}
                    </div>
                  </div>

                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Prénom (<span class="text-danger">*</span>)</label
                    >
                    <input
                      [readonly]="action == 'view'"
                      [ngClass]="{
                        'is-valid': agentForm.controls['Fr_Prenom'].valid,
                        'is-invalid': !agentForm.controls['Fr_Prenom'].valid
                      }"
                      type="text"
                      class="form-control hauteur hauteur text-capitalize"
                      name="Fr_Prenom"
                      formControlName="Fr_Prenom"
                    />
                    <div
                      [ngClass]="{
                        'valid-feedback': agentForm.controls['Fr_Prenom'].valid,
                        'invalid-feedback':
                          !agentForm.controls['Fr_Prenom'].valid
                      }"
                    >
                      {{
                        !agentForm.controls["Fr_Prenom"].valid
                          ? "Renseignez le prénom."
                          : ""
                      }}
                    </div>
                  </div>

                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Sexe (<span class="text-danger">*</span>)</label
                    >
                    <select
                      name="Civilite"
                      formControlName="Civilite"
                      [ngClass]="{
                        'is-valid': agentForm.controls['Civilite'].valid,
                        'is-invalid': !agentForm.controls['Civilite'].valid
                      }"
                      class="form-select"
                      aria-label="Default select example"
                    >
                      <option disabled>choisir votre civilité</option>
                      <option value="1">M</option>
                      <option value="2">F</option>
                    </select>
                    <div
                      [ngClass]="{
                        'valid-feedback': agentForm.controls['Civilite'].valid,
                        'invalid-feedback':
                          !agentForm.controls['Civilite'].valid
                      }"
                    >
                      {{
                        !agentForm.controls["Civilite"].valid
                          ? "Sélectionnez le sexe."
                          : ""
                      }}
                    </div>
                  </div>

                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Date de Naissance (<span class="text-danger">*</span
                      >)</label
                    >
                    <input
                      [readonly]="action == 'view'"
                      type="date"
                      class="form-control hauteur hauteur"
                      name="DateNaissance"
                      formControlName="DateNaissance"
                      [ngClass]="{
                        'is-valid': agentForm.controls['DateNaissance'].valid,
                        'is-invalid': !agentForm.controls['DateNaissance'].valid
                      }"
                    />
                    <div
                      [ngClass]="{
                        'valid-feedback':
                          agentForm.controls['DateNaissance'].valid,
                        'invalid-feedback':
                          !agentForm.controls['DateNaissance'].valid
                      }"
                    >
                      {{
                        !agentForm.controls["DateNaissance"].valid
                          ? "Renseignez la date de naissance."
                          : ""
                      }}
                    </div>
                  </div>

                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label"
                      >Departement de naissance
                    </label>

                    <div
                      class="d-flex align-items-center"
                      *ngIf="DepartementList"
                    >
                      <div class="input-group mb-3">
                        <input
                          type="text"
                          class="form-control form-select"
                          #fr_departement_naiss
                          [value]="agentForm.get('Departement_Naiss')?.value"
                          (click)="fr_departement_naiss.value = ''"
                          [matAutocomplete]="departementNaissance"
                          [ngClass]="{
                            'is-valid':
                              agentForm.controls['IDDEPARTEMENT_NAISS'].valid,
                            'is-invalid':
                              !agentForm.controls['IDDEPARTEMENT_NAISS'].valid
                          }"
                        />
                        <div
                          [ngClass]="{
                            'valid-feedback':
                              agentForm.controls['IDDEPARTEMENT_NAISS'].valid,
                            'invalid-feedback':
                              !agentForm.controls['IDDEPARTEMENT_NAISS'].valid
                          }"
                        >
                          {{
                            !agentForm.controls["IDDEPARTEMENT_NAISS"].valid
                              ? "Sélectionnez le département de naissance."
                              : ""
                          }}
                        </div>
                        <mat-autocomplete #departementNaissance>
                          <mat-option
                            *ngFor="
                              let depart of globalService.filterElement(
                                DepartementList,
                                fr_departement_naiss.value,
                                'NomDepartement'
                              )
                            "
                            (click)="
                              agentForm
                                .get('IDDEPARTEMENT_NAISS')
                                ?.setValue(depart.IDDEPARTEMENT);
                              agentForm
                                .get('Departement_Naiss')
                                ?.setValue(depart.NomDepartement)
                            "
                            >{{ depart.NomDepartement }}</mat-option
                          >
                          <mat-option>
                            <span
                              class="input-group-text bg-success text-white"
                              (click)="openDialofForAdd('departementNaiss')"
                              id="basic-addon1"
                              >Ajouter un departement<i
                                class="fa-solid fa-plus"
                              ></i
                            ></span>
                          </mat-option>
                        </mat-autocomplete>
                      </div>
                    </div>
                  </div>

                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label"
                      >Nationalité (<span class="text-danger">*</span>)
                    </label>

                    <div class="d-flex align-items-center">
                      <div class="input-group mb-3" *ngIf="nationaliteList">
                        <input
                          type="text"
                          class="form-control form-select"
                          [value]="agentForm.get('Nationalite')?.value"
                          #nationnaliteInput
                          (click)="nationnaliteInput.value = ''"
                          [matAutocomplete]="nationnalites"
                          [ngClass]="{
                            'is-valid':
                              agentForm.controls['IDNationalite'].valid,
                            'is-invalid':
                              !agentForm.controls['IDNationalite'].valid
                          }"
                        />
                        <div
                          [ngClass]="{
                            'valid-feedback':
                              agentForm.controls['IDNationalite'].valid,
                            'invalid-feedback':
                              !agentForm.controls['IDNationalite'].valid
                          }"
                        >
                          {{
                            !agentForm.controls["IDNationalite"].valid
                              ? "Sélectionnez la nationalité."
                              : ""
                          }}
                        </div>
                        <mat-autocomplete #nationnalites>
                          <mat-option
                            *ngFor="
                              let nationalite of globalService.filterElement(
                                nationaliteList,
                                nationnaliteInput.value,
                                'Libelle'
                              )
                            "
                            (click)="
                              agentForm
                                .get('IDNationalite')
                                ?.setValue(nationalite.IDNATIONALITE);
                              agentForm
                                .get('Nationalite')
                                ?.setValue(nationalite.Libelle)
                            "
                            >{{ nationalite.Libelle }}</mat-option
                          >
                          <mat-option>
                            <span
                              class="input-group-text bg-success text-white pointer"
                              (click)="openDialofForAdd('nationalite')"
                              id="basic-addon1"
                              >Ajouter une nationnalité<i
                                class="fa-solid fa-plus"
                              ></i
                            ></span>
                          </mat-option>
                        </mat-autocomplete>
                      </div>
                    </div>
                  </div>

                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Lieu de naissance (<span class="text-danger">*</span
                      >)</label
                    >
                    <input
                      [readonly]="action == 'view'"
                      type="text"
                      class="form-control hauteur hauteur"
                      name="Fr_LieuNaissance"
                      formControlName="Fr_LieuNaissance"
                      [ngClass]="{
                        'is-valid':
                          agentForm.controls['Fr_LieuNaissance'].valid,
                        'is-invalid':
                          !agentForm.controls['Fr_LieuNaissance'].valid
                      }"
                    />
                    <div
                      [ngClass]="{
                        'valid-feedback':
                          agentForm.controls['Fr_LieuNaissance'].valid,
                        'invalid-feedback':
                          !agentForm.controls['Fr_LieuNaissance'].valid
                      }"
                    >
                      {{
                        !agentForm.controls["Fr_LieuNaissance"].valid
                          ? "Renseignez le lieu de naissance."
                          : ""
                      }}
                    </div>
                  </div>

                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Adresses
                    </label>
                    <input
                      [readonly]="action == 'view'"
                      type="text"
                      class="form-control hauteur hauteur"
                      formControlName="Fr_Adresse1"
                      [ngClass]="{
                        'is-valid': agentForm.controls['Fr_Adresse1'].valid,
                        'is-invalid': !agentForm.controls['Fr_Adresse1'].valid
                      }"
                    />
                    <div
                      [ngClass]="{
                        'valid-feedback':
                          agentForm.controls['Fr_Adresse1'].valid,
                        'invalid-feedback':
                          !agentForm.controls['Fr_Adresse1'].valid
                      }"
                    >
                      {{
                        !agentForm.controls["Fr_Adresse1"].valid
                          ? "Renseignez l'adresse."
                          : ""
                      }}
                    </div>
                  </div>

                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Téléphone Mobile</label
                    >
                    <input
                      [readonly]="action == 'view'"
                      type="text"
                      class="form-control hauteur hauteur"
                      formControlName="TelMobile"
                      [ngClass]="{
                        'is-valid': agentForm.controls['TelMobile'].valid,
                        'is-invalid': !agentForm.controls['TelMobile'].valid
                      }"
                    />
                    <div
                      [ngClass]="{
                        'valid-feedback': agentForm.controls['TelMobile'].valid,
                        'invalid-feedback':
                          !agentForm.controls['TelMobile'].valid
                      }"
                    >
                      {{
                        !agentForm.controls["TelMobile"].valid
                          ? "Renseignez un mobile."
                          : ""
                      }}
                    </div>
                  </div>

                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Email</label
                    >
                    <input
                      [readonly]="action == 'view'"
                      type="email"
                      class="form-control hauteur hauteur"
                      name="Courriel"
                      formControlName="Courriel"
                      [ngClass]="{
                        'is-valid': agentForm.controls['Courriel'].valid,
                        'is-invalid': !agentForm.controls['Courriel'].valid
                      }"
                    />
                    <div
                      [ngClass]="{
                        'valid-feedback': agentForm.controls['Courriel'].valid,
                        'invalid-feedback':
                          !agentForm.controls['Courriel'].valid
                      }"
                    >
                      {{
                        !agentForm.controls["Courriel"].valid
                          ? "Renseignez un email."
                          : ""
                      }}
                    </div>
                  </div>

                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Situation Familiale</label
                    >
                    <select
                      class="form-select form-control"
                      name="SituationFamiliale"
                      formControlName="SituationFamiliale"
                      aria-label="Default select example"
                      [ngClass]="{
                        'is-valid':
                          agentForm.controls['SituationFamiliale'].valid,
                        'is-invalid':
                          !agentForm.controls['SituationFamiliale'].valid
                      }"
                    >
                      <option disabled>Sélection de situation</option>
                      <option value="1">Divorcé(e)</option>
                      <option value="2">Marié(e)</option>
                      <option value="3">Celibataire</option>
                      <option value="3">Veuf(ve)</option>
                    </select>
                    <div
                      [ngClass]="{
                        'valid-feedback':
                          agentForm.controls['SituationFamiliale'].valid,
                        'invalid-feedback':
                          !agentForm.controls['SituationFamiliale'].valid
                      }"
                    >
                      {{
                        !agentForm.controls["Courriel"].valid
                          ? "Sélectionnez une situation familiale."
                          : ""
                      }}
                    </div>
                  </div>

                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Nombre Enfants</label
                    >
                    <input
                      [readonly]="action == 'view'"
                      type="number"
                      class="form-control hauteur hauteur"
                      name="NombreEnfants"
                      formControlName="NombreEnfants"
                      [ngClass]="{
                        'is-valid': agentForm.controls['NombreEnfants'].valid,
                        'is-invalid': !agentForm.controls['NombreEnfants'].valid
                      }"
                    />
                    <div
                      [ngClass]="{
                        'valid-feedback':
                          agentForm.controls['NombreEnfants'].valid,
                        'invalid-feedback':
                          !agentForm.controls['NombreEnfants'].valid
                      }"
                    >
                      {{
                        !agentForm.controls["NombreEnfants"].valid
                          ? "Renseignez le nombre d'enfants."
                          : ""
                      }}
                    </div>
                  </div>
                </div>
                <div class="row mt-1"></div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-12">
                <div class="row">
                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label"
                      >Departement de résidence
                    </label>

                    <div class="d-flex align-items-center">
                      <div class="input-group mb-3">
                        <input
                          type="text"
                          class="form-control form-select"
                          #fr_departement
                          [value]="agentForm.get('Fr_Departement')?.value"
                          (click)="fr_departement.value = ''"
                          [matAutocomplete]="departementResidence"
                          [ngClass]="{
                            'is-valid':
                              agentForm.controls['IDDEPARTEMENT'].valid,
                            'is-invalid':
                              !agentForm.controls['IDDEPARTEMENT'].valid
                          }"
                        />
                        <div
                          [ngClass]="{
                            'valid-feedback':
                              agentForm.controls['IDDEPARTEMENT'].valid,
                            'invalid-feedback':
                              !agentForm.controls['IDDEPARTEMENT'].valid
                          }"
                        >
                          {{
                            !agentForm.controls["IDDEPARTEMENT"].valid
                              ? "Sélectionnez le département de résidence."
                              : ""
                          }}
                        </div>
                        <mat-autocomplete #departementResidence>
                          <mat-option
                            *ngFor="
                              let depart of globalService.filterElement(
                                DepartementList,
                                fr_departement.value,
                                'NomDepartement'
                              )
                            "
                            (click)="
                              agentForm
                                .get('IDDEPARTEMENT')
                                ?.setValue(depart.IDDEPARTEMENT);
                              agentForm
                                .get('Fr_Departement')
                                ?.setValue(depart.NomDepartement)
                            "
                            >{{ depart.NomDepartement }}</mat-option
                          >
                          <mat-option>
                            <span
                              class="input-group-text bg-success text-white"
                              (click)="openDialofForAdd('departement')"
                              id="basic-addon1"
                              >Ajouter un departement<i
                                class="fa-solid fa-plus"
                              ></i
                            ></span>
                          </mat-option>
                        </mat-autocomplete>
                      </div>
                    </div>
                  </div>

                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Arrondissement</label
                    >

                    <ng-container
                      *ngIf="arrondissements$ | async as arrondissementList"
                    >
                      <input
                        type="text"
                        class="form-control form-select"
                        [value]="agentForm.get('Fr_Arrondissement')?.value"
                        [matAutocomplete]="arrondissementEltSearch"
                        (click)="arrondissementElt.value = ''"
                        #arrondissementElt
                        [ngClass]="{
                          'is-valid':
                            agentForm.controls['IDARRONDISSEMENT'].valid,
                          'is-invalid':
                            !agentForm.controls['IDARRONDISSEMENT'].valid
                        }"
                      />
                      <mat-autocomplete #arrondissementEltSearch>
                        <mat-option
                          *ngFor="
                            let arr of globalService.filterElement(
                              arrondissementList,
                              arrondissementElt.value,
                              'NomArron'
                            )
                          "
                          (click)="
                            agentForm
                              .get('IDARRONDISSEMENT')
                              ?.setValue(arr.IDARRONDISSEMENT);
                            agentForm
                              .get('Fr_Arrondissement')
                              ?.setValue(arr.NomArron)
                          "
                          >{{ arr.NomArron }}</mat-option
                        >
                        <mat-option>
                          <span
                            class="input-group-text bg-success text-white"
                            (click)="openDialofForAdd('arrondissement')"
                            id="basic-addon1"
                            >Ajouter un arrondissement<i
                              class="fa-solid fa-plus"
                            ></i
                          ></span>
                        </mat-option>
                      </mat-autocomplete>
                      <div
                        [ngClass]="{
                          'valid-feedback':
                            agentForm.controls['IDARRONDISSEMENT'].valid,
                          'invalid-feedback':
                            !agentForm.controls['IDARRONDISSEMENT'].valid
                        }"
                      >
                        {{
                          !agentForm.controls["IDARRONDISSEMENT"].valid
                            ? "Sélectionnez l'arrondissement."
                            : ""
                        }}
                      </div>
                    </ng-container>
                  </div>

                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Quartier</label
                    >

                    <ng-container *ngIf="quartiers$ | async as quartierList">
                      <input
                        type="text"
                        class="form-control form-select"
                        [value]="agentForm.get('Fr_Quartier')?.value"
                        [matAutocomplete]="quartierSearch"
                        (click)="quartierElt.value = ''"
                        #quartierElt
                        [ngClass]="{
                          'is-valid': agentForm.controls['IDQUARTIER'].valid,
                          'is-invalid': !agentForm.controls['IDQUARTIER'].valid
                        }"
                      />
                      <mat-autocomplete #quartierSearch>
                        <mat-option
                          *ngFor="
                            let quart of globalService.filterElement(
                              quartierList,
                              quartierElt.value,
                              'NomQuartier'
                            )
                          "
                          (click)="
                            agentForm
                              .get('IDQUARTIER')
                              ?.setValue(quart.IDQUARTIER);
                            agentForm
                              .get('Fr_Quartier')
                              ?.setValue(quart.NomQuartier)
                          "
                          >{{ quart.NomQuartier }}</mat-option
                        >
                        <mat-option>
                          <span
                            class="input-group-text bg-success text-white"
                            (click)="openDialofForAdd('quartier')"
                            id="basic-addon1"
                            >Ajouter un quartier<i class="fa-solid fa-plus"></i
                          ></span>
                        </mat-option>
                      </mat-autocomplete>
                      <div
                        [ngClass]="{
                          'valid-feedback':
                            agentForm.controls['IDQUARTIER'].valid,
                          'invalid-feedback':
                            !agentForm.controls['IDQUARTIER'].valid
                        }"
                      >
                        {{
                          !agentForm.controls["IDQUARTIER"].valid
                            ? "Sélectionnez le quartier."
                            : ""
                        }}
                      </div>
                    </ng-container>
                  </div>

                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Site</label
                    >

                    <select
                      formControlName="IDSITE"
                      aria-label="Default select example"
                      class="form-control"
                      [ngClass]="{
                        'is-valid': agentForm.controls['IDSITE'].valid,
                        'is-invalid': !agentForm.controls['IDSITE'].valid
                      }"
                    >
                      <option disabled>selectionner un site</option>
                      <option
                        *ngFor="let site of siteList"
                        [value]="site.IDSITE"
                      >
                        {{ site.Libelle }}
                      </option>
                    </select>
                    <div
                      [ngClass]="{
                        'valid-feedback': agentForm.controls['IDSITE'].valid,
                        'invalid-feedback': !agentForm.controls['IDSITE'].valid
                      }"
                    >
                      {{
                        !agentForm.controls["IDSITE"].valid
                          ? "Sélectionnez un site."
                          : ""
                      }}
                    </div>
                  </div>

                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Fonction</label
                    >

                    <ng-container *ngIf="fonctionList">
                      <input
                        type="text"
                        class="form-control form-select"
                        [value]="agentForm.get('Fonction')?.value"
                        [matAutocomplete]="fonctionSearch"
                        (click)="fonctionElt.value = ''"
                        #fonctionElt
                        [ngClass]="{
                          'is-valid': agentForm.controls['IDFONCTION'].valid,
                          'is-invalid': !agentForm.controls['IDFONCTION'].valid
                        }"
                      />
                      <mat-autocomplete #fonctionSearch>
                        <mat-option
                          *ngFor="
                            let fonc of globalService.filterElement(
                              fonctionList,
                              fonctionElt.value,
                              'Libelle'
                            )
                          "
                          (click)="
                            agentForm
                              .get('IDFONCTION')
                              ?.setValue(fonc.IDFONCTION);
                            agentForm.get('Fonction')?.setValue(fonc.Libelle)
                          "
                          >{{ fonc.Libelle }}</mat-option
                        >
                        <mat-option>
                          <span
                            class="input-group-text bg-success text-white"
                            (click)="openDialofForAdd('fonction')"
                            id="basic-addon1"
                            >Ajouter une fonction<i class="fa-solid fa-plus"></i
                          ></span>
                        </mat-option>
                      </mat-autocomplete>
                      <div
                        [ngClass]="{
                          'valid-feedback':
                            agentForm.controls['IDFONCTION'].valid,
                          'invalid-feedback':
                            !agentForm.controls['IDFONCTION'].valid
                        }"
                      >
                        {{
                          !agentForm.controls["IDFONCTION"].valid
                            ? "Sélectionnez la fonction."
                            : ""
                        }}
                      </div>
                    </ng-container>
                  </div>

                  <div class="col-lg-4 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Code agent / login</label
                    >
                    <input
                      [readonly]="action == 'view'"
                      type="text"
                      class="form-control hauteur hauteur"
                      name="CodeAgent"
                      formControlName="CodeAgent"
                      [ngClass]="{
                        'is-valid': agentForm.controls['CodeAgent'].valid,
                        'is-invalid': !agentForm.controls['CodeAgent'].valid
                      }"
                    />
                    <div
                      [ngClass]="{
                        'valid-feedback': agentForm.controls['CodeAgent'].valid,
                        'invalid-feedback':
                          !agentForm.controls['CodeAgent'].valid
                      }"
                    >
                      {{
                        !agentForm.controls["CodeAgent"].valid
                          ? "Renseignez le code etablissement."
                          : ""
                      }}
                    </div>
                  </div>

                  <div class="col-lg-6 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Numéro CNI</label
                    >
                    <input
                      [readonly]="action == 'view'"
                      type="number"
                      class="form-control hauteur hauteur"
                      name="NumCNI"
                      formControlName="NumCNI"
                    />
                  </div>

                  <div class="col-lg-6 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Identifiant Badge</label
                    >
                    <input
                      #badgeInput
                      [readonly]="action == 'view'"
                      type="number"
                      class="form-control hauteur hauteur"
                      name="IdentifiantBadge"
                      formControlName="IdentifiantBadge"
                    />
                  </div>

                  <div class="col-lg-4 mt-1" *ngIf="action == 'view'">
                    <label for="validationCustom01" class="form-label label"
                      >Code postal
                    </label>
                    <input
                      [readonly]="action == 'view'"
                      type="text"
                      class="form-control hauteur hauteur"
                      name="Fr_Adresse1"
                      formControlName="CodePostal"
                    />
                  </div>

                  <div class="col-lg-4 mt-1" *ngIf="action == 'view'">
                    <label for="validationCustom01" class="form-label label"
                      >Login</label
                    >
                    <input
                      [readonly]="action == 'view'"
                      type="text"
                      class="form-control hauteur hauteur"
                      name="Login"
                      formControlName="Login"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div>
            <button mat-button matStepperNext class="text-primary">
              Suivant
            </button>
          </div>
        </mat-step>
        <mat-step>
          <ng-template matStepLabel>Informations comptables</ng-template>
          <div class="mt-1">
            <div class="row">
              <div class="col-lg-6">
                <div class="row">
                  <div class="col-lg-12 mt-1">
                    <label for="validationCustom01" class="form-label label"
                      >Caisse associée</label
                    >

                    <select
                      class="form-select"
                      formControlName="CaisseAssociee"
                      aria-label="Default select example"
                    >
                      <option disabled>selectionner une caisse</option>
                      <option
                        *ngFor="let caisse of caisseList"
                        [value]="caisse.IDCAISSE"
                      >
                        {{ caisse.CodeCaisse }} <span> : </span>
                        {{ caisse.LibelleCaisse }}
                      </option>
                    </select>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-3">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_SuperviseurCaisses"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Supervision caisses</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-3">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_FraisOfficielsPayes"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Frais officiels payés</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_ConsultationCaisses"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Consultation des caisses</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_HistoriqueRetraitsCaisses"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Historique retraits de caisses</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_HistoriqueVersementsCaisses"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Historique versements de caisses</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_JournalCompta"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Journal compta</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_BalanceCompta"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Balance comptabilité</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_BilanCompta"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Bilan comptable</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_CompteResultat"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Compte resultat</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_DefinirReductionsFraisEleves"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Definir réductions frais élèves</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_ImportPaiements"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Import paiements</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_ValiderOperationsDiverses"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Valider opérations diverses</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_EncaisserDroitsScolaires"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Encaisser droits scolaires</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_EncaisserFraisOccasionnels"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Encaisser frais occasionnels</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_BordereauGeneralSalaire"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Bordereau general salaire</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_AccorderAvances"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Accorder avances</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_ReglerDesCharges"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Regler les charges</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_GrandLivre"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Grand livre</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-6 mt-1">
                    <div class="form-check form-switch">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        formControlName="bDroit_ConsultationComptes"
                        id="flexSwitchCheckDefault"
                      />
                      <label
                        class="form-check-label"
                        for="flexSwitchCheckDefault"
                        >Consultation des comptes</label
                      >
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="row">
                  <div class="col-lg-6 p-0">
                    <div class="col-lg-12 mt-3">
                      <div class="content">
                        <span class="text-on-border">Mode de rémuneration</span>
                        <div class="row">
                          <div class="col-lg-6">
                            <div class="form-check">
                              <input
                                class="form-check-input"
                                name="etat"
                                type="radio"
                                value="1"
                                checked
                              />
                              <label class="form-check-label" for="flexCheckChecked">
                                Horaire
                              </label>
                            </div>
                          </div>
                          <div class="col-lg-6">
                            <div class="form-check">
                              <input
                                class="form-check-input"
                                name="etat"
                                type="radio"
                                value="2"
                                checked
                              />
                              <label class="form-check-label" for="flexCheckChecked">
                                Mensuel
                              </label>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!-- <label for="validationCustom01" class="form-label label"
                        >Mode de Rémuneration</label
                      >
                      <input
                        [readonly]="action == 'view'"
                        type="number"
                        class="form-control hauteur hauteur"
                        name="ModeRemuneration"
                        formControlName="ModeRemuneration"
                      /> -->
                    </div>
                  </div>
                  <div class="col-lg-6 p-0">
                    <div class="col-lg-12 mt-1">
                      <label for="validationCustom01" class="form-label label"
                        >Remuneration Base</label
                      >
                      <input
                        [readonly]="action == 'view'"
                        type="number"
                        class="form-control hauteur hauteur"
                        name="RemunerationBase"
                        formControlName="RemunerationBase"
                      />
                    </div>
                  </div>
                </div>
                <div class="row mt-1">
                  <div class="col-lg-12">
                    <div
                      class="mat-elevation-z8"
                      style="max-height: 400px; overflow-y: auto"
                    >
                    <table mat-table [dataSource]="dataSourceprime" *ngIf="!isLoading">
                      <!-- Position Column -->
                      <ng-container matColumnDef="LibellePrime">
                        <th class="bg-color-primary" mat-header-cell *matHeaderCellDef>
                          Prime
                        </th>
                        <td class="pointer" mat-cell *matCellDef="let element">
                          {{ element.LibellePrime }}
                        </td>
                      </ng-container>
                    
                      <ng-container matColumnDef="Montant">
                        <th class="bg-color-primary montant-column" mat-header-cell *matHeaderCellDef>
                          Montant
                        </th>
                        <td class="pointer montant-column" mat-cell *matCellDef="let element">
                          <input
                            type="text"
                            class="form-control"
                            [value]="element.Montant"
                            (input)="updateMontant(element, $event)"
                          />
                        </td>
                      </ng-container>
                    
                      <tr mat-header-row *matHeaderRowDef="displayedColumnsprime"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayedColumnsprime"></tr>
                    </table>
                    </div>
                  </div>
                  <div class="col-lg-12">
                    <div
                      class="mat-elevation-z8"
                      style="max-height: 400px; overflow-y: auto"
                    >
                      <table
                        mat-table
                        [dataSource]="dataSourceRetenue"
                        *ngIf="!isLoading"
                      >
                        <!-- Position Column -->

                        <ng-container matColumnDef="LibelleRetenue">
                          <th
                            class="bg-color-primary"
                            mat-header-cell
                            *matHeaderCellDef
                          >
                            Retenue
                          </th>
                          <td
                            class="pointer"
                            mat-cell
                            *matCellDef="let element"
                          >
                            {{ element.LibelleRetenue }}
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="Montant">
                          <th
                            class="bg-color-primary"
                            mat-header-cell
                            *matHeaderCellDef
                          >
                            Montant
                          </th>
                          <td
                            class="pointer  montant-column"
                            mat-cell
                            *matCellDef="let element"
                          >
                            <!-- {{ element.Montant }} -->
                            <input
                              class="form-control"
                              type="text"
                              [value]="element.Montant"
                              (input)="updateMontantRetenue(element, $event)"
                            />
                          </td>
                        </ng-container>

                        <tr
                          mat-header-row
                          *matHeaderRowDef="displayedColumnsretenue"
                        ></tr>
                        <tr
                          mat-row
                          *matRowDef="let row; columns: displayedColumnsretenue"
                        ></tr>
                      </table>
                      <!-- <mat-paginator
                              [pageSizeOptions]="[20, 40, 60]"
                              showFirstLastButtons
                              aria-label="Select page of periodic elements"
                            >
                            </mat-paginator> -->
                    </div>
                  </div>
                </div>
                <div class="row mt-1">
                  <div class="col-lg-6 mt-2">
                    <label for="validationCustom01" class="form-label label"
                      >Nombre Parts Impots</label
                    >
                    <input
                      [readonly]="action == 'view'"
                      type="number"
                      class="form-control hauteur hauteur"
                      name="NombrePartsImpots"
                      formControlName="NombrePartsImpots"
                    />
                  </div>

                  <div class="col-lg-6 mt-2">
                    <label for="validationCustom01" class="form-label label"
                      >Numéro Compte Bancaire</label
                    >
                    <input
                      [readonly]="action == 'view'"
                      type="number"
                      class="form-control hauteur hauteur"
                      name="NumCompteBancaire"
                      formControlName="NumCompteBancaire"
                    />
                  </div>

                  <div class="col-lg-6 mt-2">
                    <label for="validationCustom01" class="form-label label"
                      >Numéro Securité Sociale</label
                    >
                    <input
                      [readonly]="action == 'view'"
                      type="number"
                      class="form-control hauteur hauteur"
                      name="NumSecuriteSociale"
                      formControlName="NumSecuriteSociale"
                    />
                  </div>

                  <div class="col-lg-6 mt-5">
                    <label for="validationCustom01" class="form-label label"
                      >Est-imposable ?</label
                    >
                    <input
                      [readonly]="action == 'view'"
                      type="checkbox"
                      style="margin-left: 10px"
                      class="p-3"
                      name="EstImposable"
                      formControlName="EstImposable"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div>
            <button mat-button matStepperPrevious class="text-primary">
              Précédant
            </button>
            <button mat-button matStepperNext class="text-primary">
              Suivant
            </button>
          </div>
        </mat-step>
        <mat-step>
          <ng-template matStepLabel>Carrière et droits</ng-template>
          <div class="mt-1">
            <div class="row">
              <div class="col-lg-3 mt-1">
                <label for="validationCustom01" class="form-label label"
                  >Echelon</label
                >

                <select
                  class="form-select"
                  name="IDEchelon"
                  formControlName="IDEchelon"
                  aria-label="Default select example"
                >
                  <option disabled>selectionner un echelon</option>
                  <option
                    *ngFor="let echelon of echelonsList"
                    [value]="echelon.IDECHELON"
                  >
                    {{ echelon.Fr_Libelle }}
                  </option>
                </select>
              </div>

              <div class="col-lg-3 mt-1">
                <label for="validationCustom01" class="form-label label"
                  >Specialité</label
                >

                <select
                  class="form-select"
                  name="IDSpecialite"
                  formControlName="IDSpecialite"
                  aria-label="Default select example"
                >
                  <option disabled>selectionner une spécialité</option>
                  <option
                    *ngFor="let specialite of specialiteList"
                    [value]="specialite.IDSPECIALITE"
                  >
                    {{ specialite.Fr_Libelle }}
                  </option>
                </select>
              </div>

              <div class="col-lg-3 mt-1">
                <label for="validationCustom01" class="form-label label"
                  >Categorie</label
                >

                <select
                  class="form-select"
                  name="IDCategorie"
                  formControlName="IDCategorie"
                  aria-label="Default select example"
                >
                  <option disabled>selectionner une categorie</option>
                  <option
                    *ngFor="let categorie of categoriesList"
                    [value]="categorie.IDCATEGORIE"
                  >
                    {{ categorie.Fr_Libelle }}
                  </option>
                </select>
              </div>

              <div class="col-lg-3 mt-1">
                <label for="validationCustom01" class="form-label label"
                  >Grade</label
                >

                <select
                  class="form-select"
                  name="IDGRADE"
                  formControlName="IDGRADE"
                  aria-label="Default select example"
                >
                  <option disabled>selectionner un Grade</option>
                  <option
                    *ngFor="let grade of gradeList"
                    [value]="grade.IDGRADE"
                  >
                    {{ grade.Fr_Libelle }}
                  </option>
                </select>
              </div>
            </div>

            <div class="mx-2 mt-1 container">
              <label for="">Droist de l'agent</label>
              <hr />
            </div>

            <div class="row">
              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_ConsultationEleves"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Consultation élèves</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_ModificationEleves"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Modification élèves</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_InscriptionEleves"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Inscription élèves</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_RadiationEleves"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Radiation élèves</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_ChangementEtatEleves"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Changement etat élèves</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_SaisieNotes"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Saisie notes</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_SaisieNotesAnonyme"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Saisie notes anonyme</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_SaisieAbsencesEleves"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Saisie absences élèves</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_SaisieAbsenceEnseignants"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Saisie absence enseignants</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_SaisieAbsenceAgents"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Saisie absence agents</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_ImpressionCertificatsScolarite"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Impression certificats scolarite</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_ImpressionCartesScolaires"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Impression cartes scolaires</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_ImpressionBulletins"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Impression bulletins</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_ImpressionClassementEleve"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Impression classement élèves</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_ImpressionAbsences"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Impression absences</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_ImpressionEmploiDuTemps"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Impression emploi du temps</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_GestionProjetsPedagogiques"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Gestion projets pédagogiques</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_PersonnalisationNotesEtMatieres"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Personnalisation notes et Matières</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_ModifcationEmploiDuTemps"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Modifcation emploi du temps</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_GestionEnseignants"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Gestion enseignants</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_GestionAgents"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Gestion agents</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_Statistiques"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Statistiques</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_SauvegardeBDD"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Sauvegarde base de donnée</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_RestaurationBDD"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Restauration base de donnée</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_MiseAJourPortail"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Mise à jour portail</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_ModifEcolesInspection"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Modifier école</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_GestionDiplomes"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Gestion des diplômes</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="bDroit_AttributionDiplomes"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Attribution diplômes</label
                  >
                </div>
              </div>

              <div class="col-md-4 col-lg-3 mt-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    formControlName="ModifPasswordNecessaire"
                    id="flexSwitchCheckDefault"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Modifier mot de passe</label
                  >
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-2 p-0 mt-2" *ngIf="action == 'edit'">
            <button
              *ngIf="!isloadinggeneratepassword"
              (click)="openModal()"
              style="background-color: #7c57ce"
              class="text-white form-control"
            >
              Modifier le mot de passe <i class="fa-solid fa-pen-to-square"></i>
            </button>
          </div>
          <div>
            <button mat-button matStepperPrevious class="text-primary">
              Précédent
            </button>
          </div>
          <div class="container-fluid">
            <div
              class="py-2 pb-5 mb-5 col"
              *ngIf="action != 'edit' && action != 'view'"
            >
              <button
                *ngIf="!isLaoding"
                (click)="onSubmit()"
                [disabled]="agentForm.invalid || isLaoding"
                type="submit"
                class="btn text-white form-control bg-table-color"
              >
                Enregistrer
              </button>
            </div>
          </div>
        </mat-step>
      </mat-stepper>

      <div class="container-fluid">
        <div class="py-3 pb-5 mb-5 col" *ngIf="action == 'edit'">
          <button
            *ngIf="!isLaoding"
            (click)="onSubmit()"
            [disabled]="agentForm.invalid || isLaoding"
            type="submit"
            class="btn text-white form-control bg-table-color"
          >
            Modifier
          </button>
        </div>
      </div>
    </form>
  </div>

  <ng-template #loader>
    <app-loader></app-loader>
  </ng-template>
</app-gabarit>
