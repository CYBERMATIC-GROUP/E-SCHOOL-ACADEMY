
<app-gabarit
  [pageTitle]="
    eleveID
      ? 'Reinscrire l\'élève ' + eleveForm.get('Fr_Nom')?.value
      : 'Inscrire un nouvel élève'
  "
>
  <div class="container-fluid">
    <mat-stepper class="" headerPosition="bottom" class="" #stepper>
      <mat-step [stepControl]="eleveForm" class="">
        <ng-template matStepLabel>Informations générales</ng-template>
        <form [formGroup]="eleveForm" class="w-100">
          <div class="tab-content">
            <div
              class="tab-pane fade show active"
              id="nestedContent1"
              role="tabpanel"
              aria-labelledby="nestedTab1"
            >
              <div class="content mt-3">
                <span class="text-on-border fw-bold text-secondary-cust"
                  >Identités Elève</span
                >
                <div class="row">
                  <div
                    class="col-lg-4 text-center"
                    style="border-right: 1px solid rgb(237, 231, 231)"
                  >
                    <div class="w-75 m-auto mt-4">
                      <img
                        class="m-auto"
                        [src]="
                          photoEleve
                            ? photoEleve
                            : 'assets/img/59162629-blanc-profil-icône-sur-le-bouton-noir-isolé-sur-blanc.webp'
                        "
                        style="
                          max-height: 150px !important;
                          height: 150px !important;
                          max-width: 150 !important;
                          width: 150 !important;
                        "
                      />
                    </div>

                    <div class="col-lg-8 m-auto">
                      <label for="validationCustom01" class="form-label mb-2"
                        >Photo de l'eleve</label
                      >
                      <input
                        [readonly]="action == 'view'"
                        type="file"
                        class="form-control"
                        (change)="onFileSelected($event)"
                      />
                    </div>
                    <div class="mt-4">
                      MATRICULE:
                      <strong class="text-secondary-cust">{{
                        eleveForm.get("CodeEleve")?.value
                      }}</strong>
                    </div>
                  </div>
                  <div class="col-lg-8">
                    <div class="row">
                      <div class="col-12">
                        <label for="validationCustom01" class="form-label mt-3"
                          >Selectionner la nouvelle classe ici (<span
                            class="text-danger"
                            >*</span
                          >)
                        </label>
                        <!--input
                          [readonly]="action == 'view'"
                          type="text"
                          (click)="openTableClasse()"
                          [value]="eleveForm.value.IDCLASSES ? 'Classe sélectionnée : ' + eleveForm.get('textClasseValue')?.value : 'sélectionner une classe'"
                          class="form-control text-uppercase pointer form-select"
                        /-->
                        <div>
                          <button
                            class="continue-application w-100"
                            (click)="openTableClasse()"
                          >
                            <div>
                              <div class="pencil"></div>
                              <div class="folder">
                                <div class="top">
                                  <svg viewBox="0 0 24 27">
                                    <path
                                      d="M1,0 L23,0 C23.5522847,-1.01453063e-16 24,0.44771525 24,1 L24,8.17157288 C24,8.70200585 23.7892863,9.21071368 23.4142136,9.58578644 L20.5857864,12.4142136 C20.2107137,12.7892863 20,13.2979941 20,13.8284271 L20,26 C20,26.5522847 19.5522847,27 19,27 L1,27 C0.44771525,27 6.76353751e-17,26.5522847 0,26 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z"
                                    ></path>
                                  </svg>
                                </div>
                                <div class="paper"></div>
                              </div>
                            </div>
                            <span
                              *ngIf="
                                eleveForm.value.IDCLASSES > 0;
                                else notifClass
                              "
                            >
                              {{
                                eleveForm.value.IDCLASSES
                                  ? "Classe sélectionnée : " +
                                    eleveForm.get("textClasseValue")?.value
                                  : "sélectionner une classe"
                              }}
                            </span>
                            <ng-template #notifClass>
                              <span class="animated-text">
                                Cliquer ici pour sélectionner la classe ici
                                <img
                                  style="width: 1em"
                                  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGUlEQVR4nO2azW9MURiHDy0WWhY2Eq1QEaIRX2knjW78FZb+ki59h1IWXUoorRIJgqSVCBGR2Gkt7GgQFFVESXnk7fyunEzvnV4z904P+iQ3k3PmfLy/Oe97vu44t8A/CNAKdAMjwGc9I8prdaEDLAVOAdMkY9/1WFkXsIghGfsVOAG0A8v1FICTwJTKDAUphuJIGM+BrWXKbQPGVLbHBRgT0xqJGRFAEzAITOq5DGz0xEypzhYXChSD2Oj2RLyLiQ/LW6MyFifGcRcKwKiMalPaRsK4Zobrua68AZWxmDEeu1Cg6DpGQ0l65tdXXrPyJpRuVHrShQLwXkY1Kj1DTLnf+cBKJb+4UAAeyajCHwjpUHLUhQJwzJ9OUwo5reRRFwrABuAH8E1Ta1khwHbgu+q0uJAADsvIFymEvNTnIRcaQD1wwzO2nBA0Hde5EAHqgAMphOwPVoRPmmD/K+B/EQL0a99lzwCw3oUI6YLd560WyDOa0Sx9Yd6n5hRC4jaTcbwC1oUsJG4zmSTwpnbT46XnmnkXUoHAxHNNkEKS8ilzrsmVMoY9AO7E5D9MyGeuc00lxm2Wf74G3gBXku6oot4r6ihFO1TaPrDJOzz5WPB1ZtbR7HbuAXcza18LmHFLFws2vFc9Mbsz6Si9PTNUUjG6h2oq2e1e9MR0VN1RDYQ8U93mkvx6bTGMj5GYkIWcU11zp/oYMf2emELIQlq0siJ3ihNjeyNjIlghhs7ZkZhLwBI3+1B1NuokWCEGsNObhgdiRsbE9On7ny4nyOKHAnalEGPXQwerNTiJzEa8xM0GS8XkDVm6LrDDu3GvqRiyjsESMbNms7wgj8mk1mKAFdGalUfjbcAHdXA+zzsrivFpPMmrA19MX15igC710ZtH+1En7d7K3pe1m1F0KzsLGXuybDuus4In5jawKqN2F3mv9IazaDPtDmDMe129D1hc5UgMqr3xmt53Aat1wot4aq8RzCWAtcCyOeo3aEbs8txpvPQQVxPkDnslolqGQ7h5tP1XJ3AEuK+DWvRXjiQ+6bV3b+6BvYDLn1/4zplE4CPVdgAAAABJRU5ErkJggg=="
                                />
                              </span>
                            </ng-template>
                          </button>
                        </div>
                      </div>

                      <div class="col-lg-4">
                        <label for="validationCustom01" class="form-label mt-3"
                          >Nom (<span class="text-danger">*</span>)
                        </label>
                        <input
                          [readonly]="action == 'view'"
                          [ngClass]="{
                            'is-valid': eleveForm.controls['Fr_Nom'].valid,
                            'is-invalid': !eleveForm.controls['Fr_Nom'].valid
                          }"
                          type="text"
                          class="form-control text-uppercase"
                          (input)="onInputNomOrPrenom()"
                          formControlName="Fr_Nom"
                        />
                        <div
                          [ngClass]="{
                            'valid-feedback':
                              eleveForm.controls['Fr_Nom'].valid,
                            'invalid-feedback':
                              !eleveForm.controls['Fr_Nom'].valid
                          }"
                        >
                          {{
                            !eleveForm.controls["Fr_Nom"].valid
                              ? "Renseignez le Nom."
                              : "ok."
                          }}
                        </div>
                      </div>

                      <div class="col-lg-4 mt-3">
                        <label for="validationCustom01" class="form-label"
                          >Prenom (<span class="text-danger">*</span>)</label
                        >
                        <input
                          [readonly]="action == 'view'"
                          type="text"
                          (input)="onInputNomOrPrenom()"
                          class="form-control text-capitalize"
                          formControlName="Fr_Prenom"
                          [ngClass]="{
                            'is-valid': eleveForm.controls['Fr_Prenom'].valid,
                            'is-invalid': !eleveForm.controls['Fr_Prenom'].valid
                          }"
                        />

                        <div
                          [ngClass]="{
                            'valid-feedback':
                              eleveForm.controls['Fr_Prenom'].valid,
                            'invalid-feedback':
                              !eleveForm.controls['Fr_Prenom'].valid
                          }"
                        >
                          {{
                            !eleveForm.controls["Fr_Prenom"].valid
                              ? "Renseignez le prénom."
                              : "ok."
                          }}
                        </div>
                      </div>

                      <div class="col-lg-4 mt-3">
                        <label for="validationCustom01" class="form-label"
                          >Sexe (<span class="text-danger">*</span>)</label
                        >
                        <select
                          formControlName="Civilite"
                          class="form-control form-select"
                          aria-label="Default select example"
                          [ngClass]="{
                            'is-valid': eleveForm.controls['Civilite'].valid,
                            'is-invalid': !eleveForm.controls['Civilite'].valid
                          }"
                        >
                          <option disabled>choisir votre civilité</option>
                          <option value="1">M</option>
                          <option value="2">F</option>
                        </select>
                        <div
                          [ngClass]="{
                            'valid-feedback':
                              eleveForm.controls['Civilite'].valid,
                            'invalid-feedback':
                              !eleveForm.controls['Civilite'].valid
                          }"
                        >
                          {{
                            !eleveForm.controls["Civilite"].valid
                              ? "Sélectionnez le sexe."
                              : "ok."
                          }}
                        </div>
                      </div>

                      <div class="col-lg-4 mt-3">
                        <label for="validationCustom01" class="form-label"
                          >Date de Naissance (<span class="text-danger">*</span
                          >)</label
                        >
                        <input
                          type="date"
                          class="form-control"
                          formControlName="DateNaissance"
                          [ngClass]="{
                            'is-valid':
                              eleveForm.controls['DateNaissance'].valid,
                            'is-invalid':
                              !eleveForm.controls['DateNaissance'].valid
                          }"
                        />
                        <div
                          [ngClass]="{
                            'valid-feedback':
                              eleveForm.controls['DateNaissance'].valid,
                            'invalid-feedback':
                              !eleveForm.controls['DateNaissance'].valid
                          }"
                        >
                          {{
                            !eleveForm.controls["DateNaissance"].valid
                              ? "Renseignez la date de naissance."
                              : "ok."
                          }}
                        </div>
                      </div>

                      <div class="col-lg-4 mt-3">
                        <label for="validationCustom01" class="form-label"
                          >Departement de naissance</label
                        >
                        <div
                          *ngIf="
                            departementsList$ | async as departementsList;
                            else loader
                          "
                        >
                          <input
                            type="text"
                            class="form-control form-select"
                            (click)="
                              eleveForm.get('Fr_Departement')?.setValue('')
                            "
                            #departementsInput
                            [matAutocomplete]="departements"
                            formControlName="Fr_Departement"
                            [ngClass]="{
                              'is-valid':
                                eleveForm.controls['Fr_Departement'].valid,
                              'is-invalid':
                                !eleveForm.controls['Fr_Departement'].valid
                            }"
                          />
                          <div
                            [ngClass]="{
                              'valid-feedback':
                                eleveForm.controls['Fr_Departement'].valid,
                              'invalid-feedback':
                                !eleveForm.controls['Fr_Departement'].valid
                            }"
                          >
                            {{
                              !eleveForm.controls["Fr_Departement"].valid
                                ? "Renseignez le département de naissance."
                                : "ok."
                            }}
                          </div>
                          <mat-autocomplete #departements>
                            <mat-option
                              *ngFor="
                                let departement of filterElement(
                                  departementsList,
                                  departementsInput.value,
                                  'NomDepartement'
                                )
                              "
                              (click)="
                                eleveForm
                                  .get('Fr_Departement')
                                  ?.setValue(departement.NomDepartement)
                              "
                              >{{ departement.NomDepartement }}
                              </mat-option>
                              <mat-option>
                                <span
                                  class="input-group-text bg-success text-white"
                                  (click)="openDepartementNaisse()"
                                  id="basic-addon1"
                                  >Ajouter un Departement de naissance<i
                                    class="fa-solid fa-plus"
                                  ></i
                                ></span>
                              </mat-option>

                          </mat-autocomplete>
                        </div>
                      </div>

                      <div class="col-lg-4 mt-3">
                        <label for="validationCustom01" class="form-label"
                          >Lieu de naissance (<span class="text-danger">*</span
                          >)
                        </label>

                        <div
                          *ngIf="
                            departementsList$ | async as departementsList;
                            else loader
                          "
                        >
                          <input
                            type="text"
                            class="form-control form-select"
                            (click)="
                              eleveForm.get('Fr_LieuNaissance')?.setValue('')
                            "
                            #departementsInput
                            [matAutocomplete]="naissancePlace"
                            formControlName="Fr_LieuNaissance"
                            [ngClass]="{
                              'is-valid':
                                eleveForm.controls['Fr_LieuNaissance'].valid,
                              'is-invalid':
                                !eleveForm.controls['Fr_LieuNaissance'].valid
                            }"
                          />

                          <div
                            [ngClass]="{
                              'valid-feedback':
                                eleveForm.controls['Fr_LieuNaissance'].valid,
                              'invalid-feedback':
                                !eleveForm.controls['Fr_LieuNaissance'].valid
                            }"
                          >
                            {{
                              !eleveForm.controls["Fr_LieuNaissance"].valid
                                ? "Renseignez le lieu de naissance."
                                : "ok."
                            }}
                          </div>
                          <mat-autocomplete #naissancePlace>
                            <mat-option
                              *ngFor="
                                let departement of filterElement(
                                  departementsList,
                                  departementsInput.value,
                                  'NomDepartement'
                                )
                              "
                              (click)="
                                eleveForm
                                  .get('Fr_LieuNaissance')
                                  ?.setValue(departement.NomDepartement)
                              "
                              >{{ departement.NomDepartement }}
                              </mat-option>
                              <mat-option>
                                <span
                                  class="input-group-text bg-success text-white"
                                  (click)="openLieuNaisse()"
                                  id="basic-addon1"
                                  >Ajouter un lieu de naissance<i
                                    class="fa-solid fa-plus"
                                  ></i
                                ></span>
                              </mat-option>

                          </mat-autocomplete>
                        </div>
                      </div>
                      <div class="col-lg-4 mt-3">
                        <label for="validationCustom01" class="form-label"
                          >Nationalité (<span class="text-danger">*</span>)
                        </label>

                        <div class="d-flex align-items-center">
                          <div
                            class="input-group mb-3"
                            *ngIf="
                              nationaliteList$ | async as nationaliteList;
                              else loader
                            "
                          >
                            <input
                              type="text"
                              class="form-control form-select"
                              [value]="eleveForm.get('Nationalite')?.value"
                              #nationnaliteInput
                              [matAutocomplete]="nationnalites"
                              [ngClass]="{
                                'is-valid':
                                  eleveForm.controls['Nationalite'].valid,
                                'is-invalid':
                                  !eleveForm.controls['Nationalite'].valid
                              }"
                            />
                            <div
                              [ngClass]="{
                                'valid-feedback':
                                  eleveForm.controls['Nationalite'].valid,
                                'invalid-feedback':
                                  !eleveForm.controls['Nationalite'].valid
                              }"
                            >
                              {{
                                !eleveForm.controls["Nationalite"].valid
                                  ? "Sélectionnez la nationalité."
                                  : "ok."
                              }}
                            </div>
                            <mat-autocomplete #nationnalites>
                              <mat-option
                                *ngFor="
                                  let nationalite of filterElement(
                                    nationaliteList,
                                    nationnaliteInput.value,
                                    'Libelle'
                                  )
                                "
                                (click)="
                                  eleveForm
                                    .get('IDNationalite')
                                    ?.setValue(nationalite.IDNATIONALITE);
                                  eleveForm
                                    .get('Nationalite')
                                    ?.setValue(nationalite.Libelle)
                                "
                                >{{ nationalite.Libelle }} </mat-option
                              >
                              <mat-option>
                                <span
                                  class="input-group-text bg-success text-white"
                                  (click)="openNationaliteDialog()"
                                  id="basic-addon1"
                                  >Ajouter une nationnalité<i
                                    class="fa-solid fa-plus"
                                  ></i
                                ></span>
                              </mat-option>
                            </mat-autocomplete>
                          </div>
                        </div>
                      </div>

                      <div class="col-lg-4 mt-3">
                        <label for="validationCustom01" class="form-label"
                          >Etat sanitaire (<span class="text-danger">*</span>)
                        </label>

                        <div class="d-flex align-items-center">
                          <div
                            class="input-group mb-3"
                            *ngIf="
                              etatSanitairesList$ | async as etatSanitairesList;
                              else loader
                            "
                          >
                            <input
                              type="text"
                              class="form-control form-select"
                              [value]="
                                eleveForm.get('LibelleEtatSanitaire')?.value
                              "
                              #etatSanitaireInput
                              [matAutocomplete]="studentEtat"
                              [ngClass]="{
                                'is-valid':
                                  eleveForm.controls['LibelleEtatSanitaire']
                                    .valid,
                                'is-invalid':
                                  !eleveForm.controls['LibelleEtatSanitaire']
                                    .valid
                              }"
                            />
                            <div
                              [ngClass]="{
                                'valid-feedback':
                                  eleveForm.controls['LibelleEtatSanitaire']
                                    .valid,
                                'invalid-feedback':
                                  !eleveForm.controls['LibelleEtatSanitaire']
                                    .valid
                              }"
                            >
                              {{
                                !eleveForm.controls["LibelleEtatSanitaire"]
                                  .valid
                                  ? "Sélectionnez l'état sanitaire."
                                  : "ok."
                              }}
                            </div>
                            <mat-autocomplete #studentEtat>
                              <mat-option
                                *ngFor="
                                  let etat of filterElement(
                                    etatSanitairesList,
                                    etatSanitaireInput.value,
                                    'Fr_Libelle'
                                  )
                                "
                                (click)="
                                  eleveForm
                                    .get('LibelleEtatSanitaire')
                                    ?.setValue(etat.Fr_Libelle);
                                  eleveForm
                                    .get('EtatSanitaire')
                                    ?.setValue(etat.IDETAT_SANITAIRE)
                                "
                                >{{ etat.Fr_Libelle }}</mat-option
                              >
                              <mat-option>
                                <span
                                  class="input-group-text bg-success text-white"
                                  (click)="openEtatSanitaireDialog()"
                                  id="basic-addon1"
                                  >Ajouter un état sanitaire<i
                                    class="fa-solid fa-plus"
                                  ></i
                                ></span>
                              </mat-option>
                            </mat-autocomplete>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-4 mt-3">
                        <label for="validationCustom01" class="form-label"
                          >Statut
                        </label>

                        <div class="d-flex align-items-center">
                          <div
                            class="input-group mb-3"
                            *ngIf="(statutElevesList$ | async) as statutElevesList; else loader"
                          >
                            <input
                              type="text"
                              class="form-control form-select"
                              #statusInput
                              [value]="eleveForm.get('Statut')?.value"
                              [matAutocomplete]="statusStudent"
                              [ngClass]="{
                                'is-valid': eleveForm.controls['Statut'].valid,
                                'is-invalid': !eleveForm.controls['Statut'].valid
                              }"
                            />
                            <div
                              [ngClass]="{
                                'valid-feedback':
                                  eleveForm.controls['Statut'].valid,
                                'invalid-feedback':
                                  !eleveForm.controls['Statut'].valid
                              }"
                            >
                              {{
                                !eleveForm.controls["Statut"].valid
                                  ? "Sélectionnez le Statut."
                                  : "ok."
                              }}
                            </div>
                            <mat-autocomplete #statusStudent>
                              <mat-option
                                *ngFor="
                                  let status of filterElement(
                                    statutElevesList,
                                    statusInput.value,
                                    'Fr_Libelle'
                                  )
                                "
                                (click)="
                                  eleveForm
                                    .get('IDSTATUTELEVE')
                                    ?.setValue(status.IDSTATUTELEVE);
                                  eleveForm
                                    .get('Statut')
                                    ?.setValue(status.Fr_Libelle)
                                "
                                >{{ status.Fr_Libelle }}</mat-option
                              >
                              <mat-option>
                                <span
                                  class="input-group-text bg-success text-white"
                                  (click)="openStatusEleveDialog()"
                                  id="basic-addon1"
                                  >Ajouter un status élève<i
                                    class="fa-solid fa-plus"
                                  ></i
                                ></span>
                              </mat-option>
                            </mat-autocomplete>
                          </div>
                        </div>
                      </div>

                      <div class="col-lg-4 mt-3">
                        <label for="validationCustom01" class="form-label"
                          >Nouveau/Ancien (<span class="text-danger">*</span>)
                        </label>

                        <select
                          class="form-select"
                          aria-label="Default select example"
                          formControlName="NouveauDansAnneeCourante"
                          [ngClass]="{
                            'is-valid':
                              eleveForm.controls['NouveauDansAnneeCourante']
                                .valid,
                            'is-invalid':
                              !eleveForm.controls['NouveauDansAnneeCourante']
                                .valid
                          }"
                        >
                        <option disabled selected>Sélectionnez si nouveau ou ancien</option>
                          <option [value]="1">Nouveau</option>
                          <option [value]="0">Ancien</option>
                        </select>

                        <div
                          [ngClass]="{
                            'valid-feedback':
                              eleveForm.controls['NouveauDansAnneeCourante']
                                .valid,
                            'invalid-feedback':
                              !eleveForm.controls['NouveauDansAnneeCourante']
                                .valid
                          }"
                        >
                          {{
                            !eleveForm.controls["NouveauDansAnneeCourante"]
                              .valid
                              ? "Sélectionez nouveau ou ancien."
                              : "ok."
                          }}
                        </div>
                      </div>
                      <div class="col-lg-4 mt-3">
                        <label for="validationCustom01" class="form-label"
                          >Redoublant/Non Redoublant (<span class="text-danger"
                            >*</span
                          >)
                        </label>

                        <select
                          class="form-select"
                          aria-label="Default select example"
                          formControlName="Redoublant"
                          [ngClass]="{
                            'is-valid': eleveForm.controls['Redoublant'].valid,
                            'is-invalid':
                              !eleveForm.controls['Redoublant'].valid
                          }"
                        >
                          <option [value]="1">Redoublant</option>
                          <option [value]="0">Non Rédoublant</option>
                        </select>
                        <div
                          [ngClass]="{
                            'valid-feedback':
                              eleveForm.controls['Redoublant'].valid,
                            'invalid-feedback':
                              !eleveForm.controls['Redoublant'].valid
                          }"
                        >
                          {{
                            !eleveForm.controls["Redoublant"].valid
                              ? "Sélectionnez redoublant ou non redoublant."
                              : "ok."
                          }}
                        </div>
                      </div>

                      <div class="col-lg-4 mt-3">
                        <label for="validationCustom01" class="form-label"
                          >Identifiant Scolaire unique
                        </label>

                        <input
                          [readonly]="action == 'view'"
                          type="text"
                          class="form-control"
                          formControlName="IdentifiantNational"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row mt-5">
                <div class="col-lg-6">
                  <div class="content">
                    <span class="text-on-border fw-bold text-secondary-cust"
                      >Langues Vivantes</span
                    >

                    <div
                      *ngIf="
                        langueVivantes$ | async as langueVivantes;
                        else loader
                      "
                    >
                      <div class="col-lg-12 pt-3">
                        <label for="validationCustom01" class="form-label"
                          >Première langue
                        </label>

                        <div class="d-flex align-items-center">
                          <div class="input-group">
                            <input
                              type="text"
                              class="form-control form-select"
                              #langue1Input
                              [value]="eleveForm.get('LangueVivante1')?.value"
                              [matAutocomplete]="langue1"
                              [ngClass]="{
                                'is-valid':
                                  eleveForm.controls['LangueVivante1'].valid,
                                'is-invalid':
                                  !eleveForm.controls['LangueVivante1'].valid
                              }"
                            />
                          </div>

                          <mat-autocomplete #langue1>
                            <mat-option
                              *ngFor="
                                let lang of filterElement(
                                  langueVivantes,
                                  langue1Input.value,
                                  'Fr_Libelle'
                                )
                              "
                              (click)="
                                eleveForm
                                  .get('IDLangueVivante1')
                                  ?.setValue(lang.IDLANGUE);
                                eleveForm
                                  .get('LangueVivante1')
                                  ?.setValue(lang.Fr_Libelle)
                              "
                              >{{ lang.Fr_Libelle }}</mat-option
                            >
                            <mat-option>
                              <span
                                class="input-group-text bg-success text-white"
                                (click)="openPremieierelangueDialog()"
                                id="basic-addon1"
                                >Ajouter une langue vivante<i
                                  class="fa-solid fa-plus"
                                ></i
                              ></span>
                            </mat-option>
                          </mat-autocomplete>
                        </div>

                        <div
                          [ngClass]="{
                            'text-danger':
                              !eleveForm.controls['LangueVivante1'].valid,
                            'text-success':
                              eleveForm.controls['LangueVivante1'].valid
                          }"
                        >
                          {{
                            !eleveForm.controls["LangueVivante1"].valid
                              ? "Renseignez une langue."
                              : "ok."
                          }}
                        </div>
                      </div>

                      <div class="col-lg-12 pt-3">
                        <label for="validationCustom01" class="form-label"
                          >Deuxième langue
                        </label>
                        <div class="d-flex align-items-center">
                          <div class="input-group">
                            <input
                              type="text"
                              class="form-control form-select"
                              #langue2Input
                              [value]="eleveForm.get('LangueVivante2')?.value"
                              [matAutocomplete]="langue2"
                              [ngClass]="{
                                'is-valid':
                                  eleveForm.controls['LangueVivante2'].valid,
                                'is-invalid':
                                  !eleveForm.controls['LangueVivante2'].valid
                              }"
                            />
                          </div>
                        </div>
                        <mat-autocomplete #langue2>
                          <mat-option
                            *ngFor="
                              let lang of filterElement(
                                langueVivantes,
                                langue2Input.value,
                                'Fr_Libelle'
                              )
                            "
                            (click)="
                              eleveForm
                                .get('IDLangueVivante2')
                                ?.setValue(lang.IDLANGUE);
                              eleveForm
                                .get('LangueVivante2')
                                ?.setValue(lang.Fr_Libelle)
                            "
                            >{{ lang.Fr_Libelle }}</mat-option
                          >

                          <mat-option>
                            <span
                              class="input-group-text bg-success text-white"
                              (click)="openDeuxiemelangueDialog()"
                              id="basic-addon1"
                              >Ajouter une langue<i class="fa-solid fa-plus"></i
                            ></span>
                          </mat-option>
                        </mat-autocomplete>
                        <div
                          [ngClass]="{
                            'text-danger':
                              !eleveForm.controls['LangueVivante2'].valid,
                            'text-success':
                              eleveForm.controls['LangueVivante2'].valid
                          }"
                        >
                          {{
                            !eleveForm.controls["LangueVivante2"].valid
                              ? "Renseignez une langue."
                              : "ok."
                          }}
                        </div>
                      </div>

                      <div class="col-lg-12 pt-3">
                        <label for="validationCustom01" class="form-label"
                          >Troisième langue
                        </label>
                        <div class="d-flex align-items-center">
                          <div class="input-group">
                            <input
                              type="text"
                              class="form-control form-select"
                              #langue3Input
                              [value]="eleveForm.get('LangueVivante3')?.value"
                              [matAutocomplete]="langue3"
                              [ngClass]="{
                                'is-valid':
                                  eleveForm.controls['LangueVivante3'].valid,
                                'is-invalid':
                                  !eleveForm.controls['LangueVivante3'].valid
                              }"
                            />

                            <mat-autocomplete #langue3>
                              <mat-option
                                *ngFor="
                                  let lang of filterElement(
                                    langueVivantes,
                                    langue3Input.value,
                                    'Fr_Libelle'
                                  )
                                "
                                (click)="
                                  eleveForm
                                    .get('IDLangueVivante3')
                                    ?.setValue(lang.IDLANGUE);
                                  eleveForm
                                    .get('LangueVivante3')
                                    ?.setValue(lang.Fr_Libelle)
                                "
                                >{{ lang.Fr_Libelle }}</mat-option
                              >
                              <mat-option>
                                <span
                                  class="input-group-text bg-success text-white"
                                  (click)="openTroisiemelangueDialog()"
                                  id="basic-addon1"
                                  >Ajouter une langue sanitaire<i
                                    class="fa-solid fa-plus"
                                  ></i
                                ></span>
                              </mat-option>
                            </mat-autocomplete>
                          </div>
                        </div>
                        <div
                          [ngClass]="{
                            'text-danger':
                              !eleveForm.controls['LangueVivante3'].valid,
                            'text-success':
                              eleveForm.controls['LangueVivante3'].valid
                          }"
                        >
                          {{
                            !eleveForm.controls["LangueVivante3"].valid
                              ? "Renseignez une langue."
                              : "ok."
                          }}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="content">
                    <span class="text-on-border fw-bold text-secondary-cust"
                      >Localisation</span
                    >

                    <div class="col-lg-12">
                      <label for="validationCustom01" class="form-label mt-3"
                        >Departement de résidence
                      </label>
                      <div
                        *ngIf="
                          departementsList$ | async as departementsList;
                          else loader
                        "
                      >
                        <input
                          type="text"
                          class="form-control form-select"
                          (click)="
                            eleveForm.get('DepartementResidence')?.setValue('')
                          "
                          #departementsInput
                          [matAutocomplete]="departements"
                          formControlName="DepartementResidence"
                          [ngClass]="{
                            'is-valid':
                              eleveForm.controls['DepartementResidence'].valid,
                            'is-invalid':
                              !eleveForm.controls['DepartementResidence'].valid
                          }"
                        />
                        <div
                          [ngClass]="{
                            'valid-feedback':
                              eleveForm.controls['DepartementResidence'].valid,
                            'invalid-feedback':
                              !eleveForm.controls['DepartementResidence'].valid
                          }"
                        >
                          {{
                            !eleveForm.controls["DepartementResidence"].valid
                              ? "Renseignez le département de résidence."
                              : "ok."
                          }}
                        </div>
                        <mat-autocomplete #departements>
                          <mat-option
                            *ngFor="
                              let departement of filterElement(
                                departementsList,
                                departementsInput.value,
                                'NomDepartement'
                              )
                            "
                            (click)="
                              eleveForm
                                .get('DepartementResidence')
                                ?.setValue(departement.NomDepartement)
                            "
                            >{{ departement.NomDepartement }}</mat-option
                          >
                        </mat-autocomplete>
                      </div>
                    </div>

                    <!-- <div class="col-lg-12">
                      <label for="validationCustom01" class="form-label mt-3"
                        >Arrondissement
                      </label>
                      <input
                        [readonly]="action == 'view'"
                        type="text"
                        class="form-control form-select"
                        formControlName="Fr_Arrondissement"
                        [ngClass]="{
                          'is-valid': eleveForm.controls['Fr_Arrondissement'].valid,
                          'is-invalid': !eleveForm.controls['Fr_Arrondissement'].valid
                        }"
                      />
                      <div [ngClass]="{'text-danger': !eleveForm.controls['Fr_Arrondissement'].valid, 'text-success': eleveForm.controls['Fr_Arrondissement'].valid}">
                        {{
                          !eleveForm.controls["Fr_Arrondissement"].valid
                            ? "Renseignez l'arrondissement."
                            : "ok."
                        }}
                      </div>
                    </div> -->

                    <div class="col-lg-12">
                      <label for="validationCustom01" class="form-label mt-3"
                        >Arrondissement
                      </label>
                      <input
                        [readonly]="action == 'view'"
                        type="text"
                        class="form-control form-select"
                        formControlName="Fr_Arrondissement"
                        [ngClass]="{
                          'is-valid':
                            eleveForm.controls['Fr_Arrondissement'].valid,
                          'is-invalid':
                            !eleveForm.controls['Fr_Arrondissement'].valid
                        }"
                      />
                      <div
                        [ngClass]="{
                          'text-danger':
                            !eleveForm.controls['Fr_Arrondissement'].valid,
                          'text-success':
                            eleveForm.controls['Fr_Arrondissement'].valid
                        }"
                      >
                        {{
                          !eleveForm.controls["Fr_Arrondissement"].valid
                            ? "Renseignez l'arrondissement."
                            : "ok."
                        }}
                      </div>
                    </div>

                    <div class="col-lg-12">
                      <label for="validationCustom01" class="form-label mt-3"
                        >Ville
                      </label>
                      <input
                        [readonly]="action == 'view'"
                        type="text"
                        class="form-control form-select"
                        formControlName="Fr_Ville"
                        [ngClass]="{
                          'is-valid': eleveForm.controls['Fr_Ville'].valid,
                          'is-invalid': !eleveForm.controls['Fr_Ville'].valid
                        }"
                      />
                      <div
                        [ngClass]="{
                          'text-danger': !eleveForm.controls['Fr_Ville'].valid,
                          'text-success': eleveForm.controls['Fr_Ville'].valid
                        }"
                      >
                        {{
                          !eleveForm.controls["Fr_Ville"].valid
                            ? "Renseignez une ville."
                            : "ok."
                        }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row mt-5">
                <div class="col-lg-6">
                  <div class="content mt-3">
                    <span class="text-on-border fw-bold text-secondary-cust"
                      >Identifications</span
                    >

                    <div class="col-lg-12">
                      <label for="validationCustom01" class="form-label mt-3"
                        >Email
                      </label>
                      <input
                        [readonly]="action == 'view'"
                        type="text"
                        class="form-control"
                        formControlName="Courriel"
                        [ngClass]="{
                          'is-valid': eleveForm.controls['Courriel'].valid,
                          'is-invalid': !eleveForm.controls['Courriel'].valid
                        }"
                      />
                      <div
                        [ngClass]="{
                          'text-danger': !eleveForm.controls['Courriel'].valid,
                          'text-success': eleveForm.controls['Courriel'].valid
                        }"
                      >
                        {{
                          !eleveForm.controls["Courriel"].valid
                            ? "Renseignez un email."
                            : "ok."
                        }}
                      </div>
                    </div>

                    <div class="col-lg-12">
                      <label for="validationCustom01" class="form-label mt-3"
                        >Mobile
                      </label>
                      <input
                        [readonly]="action == 'view'"
                        type="text"
                        class="form-control"
                        formControlName="TelMobile"
                        [ngClass]="{
                          'is-valid': eleveForm.controls['TelMobile'].valid,
                          'is-invalid': !eleveForm.controls['TelMobile'].valid
                        }"
                      />
                      <div
                        [ngClass]="{
                          'text-danger': !eleveForm.controls['TelMobile'].valid,
                          'text-success': eleveForm.controls['TelMobile'].valid
                        }"
                      >
                        {{
                          !eleveForm.controls["TelMobile"].valid
                            ? "Renseignez un mobile."
                            : "ok."
                        }}
                      </div>
                    </div>

                    <div class="col-lg-12">
                      <label for="validationCustom01" class="form-label mt-3"
                        >Numéro CNI
                      </label>
                      <input
                        [readonly]="action == 'view'"
                        type="text"
                        class="form-control"
                        formControlName="NumCNI"
                        [ngClass]="{
                          'is-valid': eleveForm.controls['NumCNI'].valid,
                          'is-invalid': !eleveForm.controls['NumCNI'].valid
                        }"
                      />
                      <div
                        [ngClass]="{
                          'text-danger': !eleveForm.controls['NumCNI'].valid,
                          'text-success': eleveForm.controls['NumCNI'].valid
                        }"
                      >
                        {{
                          !eleveForm.controls["NumCNI"].valid
                            ? "Renseignez le numéro CNI."
                            : "ok."
                        }}
                      </div>
                    </div>

                    <div class="col-lg-12">
                      <label for="validationCustom01" class="form-label mt-3"
                        >Numéro d'identification unique (NIU)
                      </label>
                      <input
                        [readonly]="action == 'view'"
                        type="text"
                        class="form-control"
                        formControlName="IdentifiantBadge"
                        [ngClass]="{
                          'is-valid':
                            eleveForm.controls['IdentifiantBadge'].valid,
                          'is-invalid':
                            !eleveForm.controls['IdentifiantBadge'].valid
                        }"
                      />
                      <div
                        [ngClass]="{
                          'text-danger':
                            !eleveForm.controls['IdentifiantBadge'].valid,
                          'text-success':
                            eleveForm.controls['IdentifiantBadge'].valid
                        }"
                      >
                        {{
                          !eleveForm.controls["IdentifiantBadge"].valid
                            ? "Renseignez un identifiant de badge."
                            : "ok."
                        }}
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="content mt-3">
                    <span class="text-on-border fw-bold text-secondary-cust"
                      >Autres parametres</span
                    >

                    <div class="col-lg-12 mt-3">
                      <label for="validationCustom01" class="form-label"
                        >Sélectionner un cycle
                      </label>

                      <div
                        class="d-flex align-items-center"
                        *ngIf="cycleList$ | async as cycleList; else loader"
                      >
                        <input
                          type="text"
                          class="form-control form-select"
                          #cycleInput
                          (click)="eleveForm.get('Cycle')?.setValue('')"
                          [value]="eleveForm.get('Cycle')?.value"
                          [matAutocomplete]="cycles"
                          formControlName="Cycle"
                          placeholder="Recherchez et sélectionner un cycle"
                          [ngClass]="{
                            'is-valid': eleveForm.controls['IDCYCLES'].valid,
                            'is-invalid': !eleveForm.controls['IDCYCLES'].valid
                          }"
                        />
                        <mat-autocomplete #cycles>
                          <mat-option
                            *ngFor="
                              let cycle of filterElement(
                                cycleList,
                                cycleInput.value,
                                'Libelle'
                              )
                            "
                            (click)="
                              eleveForm
                                .get('IDCYCLES')
                                ?.setValue(cycle.IDCYCLES);
                              eleveForm.get('Cycle')?.setValue(cycle.Libelle)
                            "
                            >{{ cycle.Libelle }}</mat-option
                          >
                        </mat-autocomplete>
                      </div>
                      <div
                        [ngClass]="{
                          'text-danger': !eleveForm.controls['IDCYCLES'].valid,
                          'text-success': eleveForm.controls['IDCYCLES'].valid
                        }"
                      >
                        {{
                          !eleveForm.controls["IDCYCLES"].valid
                            ? "Sélectionnez un cycle."
                            : "ok."
                        }}
                      </div>
                    </div>

                    <div class="col-lg-12 mt-3">
                      <label for="validationCustom01" class="form-label"
                        >Site d'affectation
                      </label>
                      <div class="d-flex align-items-center">
                        <div
                          class="input-group mb-3"
                          *ngIf="siteList$ | async as siteList; else loader"
                        >
                          <input
                            type="text"
                            class="form-control form-select"
                            #siteInput
                            (click)="eleveForm.get('Site')?.setValue('')"
                            [value]="eleveForm.get('Site')?.value"
                            [matAutocomplete]="sites"
                            [ngClass]="{
                              'is-valid': eleveForm.controls['Site'].valid,
                              'is-invalid': !eleveForm.controls['Site'].valid
                            }"
                          />

                          <mat-autocomplete #sites>
                            <mat-option
                              *ngFor="
                                let site of filterElement(
                                  siteList,
                                  siteInput.value,
                                  'Libelle'
                                )
                              "
                              (click)="
                                eleveForm.get('IDSITE')?.setValue(site.IDSITE);
                                eleveForm.get('Site')?.setValue(site.Libelle)
                              "
                              >{{ site.Libelle }}</mat-option
                            >
                            <mat-option>
                              <span
                                class="input-group-text bg-success text-white"
                                (click)="openSiteDialog()"
                                id="basic-addon1"
                                >Ajouter un site<i class="fa-solid fa-plus"></i
                              ></span>
                            </mat-option>
                          </mat-autocomplete>
                        </div>
                      </div>
                      <div
                        [ngClass]="{
                          'text-danger': !eleveForm.controls['Site'].valid,
                          'text-success': eleveForm.controls['Site'].valid
                        }"
                      >
                        {{
                          !eleveForm.controls["Site"].valid
                            ? "Sélectionnez un site."
                            : "ok."
                        }}
                      </div>
                    </div>

                    <div class="col-lg-12">
                      <label for="validationCustom01" class="form-label"
                        >Etablissement d'origine
                      </label>

                      <div
                        class="border"
                        *ngIf="
                          etablissementList$ | async as etablissementList;
                          else loader
                        "
                      >
                        <input
                          type="text"
                          class="form-control form-select"
                          (click)="
                            eleveForm
                              .get('EtablissementProvenance')
                              ?.setValue('')
                          "
                          #etsOrigine
                          [value]="
                            eleveForm.get('EtablissementProvenance')?.value
                          "
                          [matAutocomplete]="etsList"
                          [ngClass]="{
                            'is-valid':
                              eleveForm.controls['EtablissementProvenance']
                                .valid,
                            'is-invalid':
                              !eleveForm.controls['EtablissementProvenance']
                                .valid
                          }"
                        />
                        <mat-autocomplete #etsList>
                          <mat-option
                            *ngFor="
                              let ets of filterElement(
                                etablissementList,
                                etsOrigine.value,
                                'Fr_Nom'
                              )
                            "
                            (click)="
                              eleveForm
                                .get('EtablissementOrigine')
                                ?.setValue(ets.IDETABLISSEMENTS);
                              eleveForm
                                .get('EtablissementProvenance')
                                ?.setValue(ets.Fr_Nom)
                            "
                            >{{ ets.Fr_Nom }}
                            </mat-option>
                            <mat-option>
                              <span
                                class="input-group-text bg-success text-white"
                                (click)="openEtablissementOrigine()"
                                id="basic-addon1"
                                >Ajouter un établissement d'origine<i class="fa-solid fa-plus"></i
                              ></span>
                            </mat-option>
                        </mat-autocomplete>
                      </div>
                      <div
                        [ngClass]="{
                          'text-danger':
                            !eleveForm.controls['EtablissementProvenance']
                              .valid,
                          'text-success':
                            eleveForm.controls['EtablissementProvenance'].valid
                        }"
                      >
                        {{
                          !eleveForm.controls["EtablissementProvenance"].valid
                            ? "Renseignez un établissement d'origine."
                            : "ok."
                        }}
                      </div>
                    </div>

                    <div class="col-lg-12 mt-3">
                      <label for="validationCustom01" class="form-label"
                        >Année BEPC
                      </label>
                      <input
                        [readonly]="action == 'view'"
                        type="date"
                        class="form-control"
                        formControlName="BEPC_Annee"
                        [ngClass]="{
                          'is-valid': eleveForm.controls['BEPC_Annee'].valid,
                          'is-invalid': !eleveForm.controls['BEPC_Annee'].valid
                        }"
                      />
                      <div
                        [ngClass]="{
                          'text-danger':
                            !eleveForm.controls['BEPC_Annee'].valid,
                          'text-success': eleveForm.controls['BEPC_Annee'].valid
                        }"
                      >
                        {{
                          !eleveForm.controls["BEPC_Annee"].valid
                            ? "Renseignez une année pour le BEPC."
                            : "ok."
                        }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row mt-5">
                <div class="col-lg-6">
                  <div class="content mt-3">
                    <span class="text-on-border fw-bold text-secondary-cust"
                      >Paramètres Divers</span
                    >

                    <div class="row mt-3">
                      <div class="col-lg-4">
                        <div class="form-check m-auto">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            formControlName="Boursier"
                            id="flexCheckDefault"
                          />
                          <label class="form-check-label"> Boursier </label>
                        </div>
                      </div>

                      <div class="col-lg-4">
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            formControlName="ExempteDuSport"
                            id="flexCheckDefault"
                          />
                          <label class="form-check-label">
                            Exempte Du Sport
                          </label>
                        </div>
                      </div>

                      <div class="col-lg-4">
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            value=""
                            id="flexCheckDefault"
                            formControlName="bPleinTemps"
                          />
                          <label class="form-check-label"> Plein Temps </label>
                        </div>
                      </div>

                      <div class="col-lg-4">
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            value=""
                            id="flexCheckDefault"
                            formControlName="bMarie"
                          />
                          <label class="form-check-label"> Marie </label>
                        </div>
                      </div>

                      <div class="col-lg-4">
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            formControlName="Travailleur"
                            id="flexCheckDefault"
                          />
                          <label class="form-check-label"> Travailleur </label>
                        </div>
                      </div>

                      <div class="col-lg-4">
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            id="flexCheckDefault"
                            formControlName="ParentsDivorces"
                          />
                          <label class="form-check-label">
                            Parents Divorces
                          </label>
                        </div>
                      </div>

                      <div class="col-lg-4">
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            formControlName="FraisInscriptionPayes"
                            id="flexCheckDefault"
                          />
                          <label class="form-check-label">
                            Frais Inscription Payes
                          </label>
                        </div>
                      </div>

                      <div class="col-lg-4">
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            value=""
                            id="flexCheckDefault"
                          />
                          <label class="form-check-label">
                            Frais Inscription Payes
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div
                    class="content mt-3"
                    [ngClass]="{
                      'border-danger':
                        eleveForm.get('SMS_ParentParDefaut')?.value < 1,
                      'border-success':
                        eleveForm.get('SMS_ParentParDefaut')?.value > 0
                    }"
                  >
                    <span class="text-on-border fw-bold text-secondary-cust"
                      >Par défaut . Envoyer les sms Alerte parents (<span
                        class="text-danger"
                        >*</span
                      >)
                    </span>

                    <div class="row mt-3">
                      <div class="col-lg-12">
                        <div class="form-check m-auto">
                          <input
                            class="form-check-input"
                            type="radio"
                            formControlName="SMS_ParentParDefaut"
                            [value]="1"
                            [checked]="
                              eleveForm.get('SMS_ParentParDefaut')?.value == '1'
                            "
                            id="flexCheckDefault"
                          />
                          <label class="form-check-label"> Au père </label>
                        </div>
                      </div>

                      <div class="col-lg-6">
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="radio"
                            formControlName="SMS_ParentParDefaut"
                            [checked]="
                              eleveForm.get('SMS_ParentParDefaut')?.value == '2'
                            "
                            [value]="2"
                            id="flexCheckDefault"
                          />
                          <label class="form-check-label"> A la mère </label>
                        </div>
                      </div>

                      <div class="col-lg-6">
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="radio"
                            formControlName="SMS_ParentParDefaut"
                            [value]="3"
                            [checked]="
                              eleveForm.get('SMS_ParentParDefaut')?.value == '3'
                            "
                            id="flexCheckDefault"
                          />
                          <label class="form-check-label"> Au tuteur </label>
                        </div>
                      </div>

                      <div class="col-lg-6">
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="radio"
                            formControlName="SMS_ParentParDefaut"
                            [checked]="
                              eleveForm.get('SMS_ParentParDefaut')?.value == '4'
                            "
                            [value]="4"
                            id="flexCheckDefault"
                          />
                          <label class="form-check-label"> A l'élève </label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div
              class="tab-pane fade"
              id="nestedContent2"
              role="tabpanel"
              aria-labelledby="nestedTab2"
            >
              kl;d,l
            </div>
          </div>
        </form>
        <div class="mt-5 d-flex justify-content-end">
          <button mat-button matStepperNext>
            <i class="fa-solid fa-angle-double-right text-secondary-cust"></i>
            <span class="text-secondary-cust">Suivant</span>
          </button>
        </div>
      </mat-step>

      <mat-step [stepControl]="eleveForm">
        <ng-template matStepLabel>Informations supplémentaires</ng-template>
        <form [formGroup]="eleveForm">
          <div class="row mt-3">
            <div class="col-lg-3">
              <label for="validationCustom01" class="form-label"
                >Nom Prenom Tuteur (<span class="text-danger">*</span>)</label
              >
              <input
                [readonly]="action == 'view'"
                type="text"
                class="form-control text-capitalize"
                formControlName="Fr_NomPrenomTuteur"
                [ngClass]="{
                  'is-valid': eleveForm.controls['Fr_NomPrenomTuteur'].valid,
                  'is-invalid': !eleveForm.controls['Fr_NomPrenomTuteur'].valid
                }"
              />
              <div
                [ngClass]="{
                  'valid-feedback':
                    eleveForm.controls['Fr_NomPrenomTuteur'].valid,
                  'invalid-feedback':
                    !eleveForm.controls['Fr_NomPrenomTuteur'].valid
                }"
              >
                {{
                  !eleveForm.controls["Fr_NomPrenomTuteur"].valid
                    ? "Renseignez le Nom et prénom du tuteur."
                    : "ok."
                }}
              </div>
            </div>

            <div class="col-lg-3">
              <label for="validationCustom01" class="form-label"
                >Profession Tuteur</label
              >
              <div *ngIf="professionList$ | async as fonctionList; else loader">
                <input
                  type="text"
                  class="form-control form-select"
                  (click)="eleveForm.get('ProfessionTuteur')?.setValue('')"
                  #fonctionInput1
                  [matAutocomplete]="profession"
                  formControlName="ProfessionTuteur"
                />
                <mat-autocomplete #profession>
                  <mat-option
                    *ngFor="
                      let item of filterElement(
                        fonctionList,
                        fonctionInput1.value,
                        'Fr_Libelle'
                      )
                    "
                    (click)="
                      eleveForm
                        .get('ProfessionTuteur')
                        ?.setValue(item.Fr_Libelle);
                      eleveForm
                        .get('IDProfessionTuteur')
                        ?.setValue(item.IDPROFESSION)
                    "
                    >{{ item.Fr_Libelle }}</mat-option
                  >
                </mat-autocomplete>
              </div>
            </div>

            <div class="col-lg-3">
              <label for="validationCustom01" class="form-label"
                >Email Tuteur</label
              >
              <input
                [readonly]="action == 'view'"
                type="text"
                class="form-control"
                formControlName="EmailTuteur"
              />
            </div>

            <div class="col-lg-3">
              <label for="validationCustom01" class="form-label"
                >Téléphone Tuteur</label
              >
              <input
                [readonly]="action == 'view'"
                type="text"
                class="form-control"
                formControlName="TelMobileTuteur"
                [ngClass]="{
                  'is-valid': eleveForm.controls['TelMobileTuteur'].valid,
                  'is-invalid': !eleveForm.controls['TelMobileTuteur'].valid
                }"
              />
              <div
                [ngClass]="{
                  'text-success': eleveForm.controls['TelMobileTuteur'].valid,
                  'text-danger': !eleveForm.controls['TelMobileTuteur'].valid
                }"
              >
                {{
                  !eleveForm.controls["TelMobileTuteur"].valid
                    ? "Renseignez le numéro de téléphone du tuteur."
                    : "ok."
                }}
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-lg-3">
              <label for="validationCustom01" class="form-label"
                >Nom Prenom pere
              </label>
              <input
                [readonly]="action == 'view'"
                type="text"
                class="form-control text-capitalize"
                formControlName="Fr_NomPrenomPere"
                [ngClass]="{
                  'is-valid': eleveForm.controls['Fr_NomPrenomPere'].valid,
                  'is-invalid': !eleveForm.controls['Fr_NomPrenomPere'].valid
                }"
              />
              <div
                [ngClass]="{
                  'valid-feedback':
                    eleveForm.controls['Fr_NomPrenomPere'].valid,
                  'invalid-feedback':
                    !eleveForm.controls['Fr_NomPrenomPere'].valid
                }"
              >
                {{
                  !eleveForm.controls["Fr_NomPrenomPere"].valid
                    ? "Renseignez le Nom et prénom du père."
                    : "ok."
                }}
              </div>
            </div>

            <div class="col-lg-3">
              <label for="validationCustom01" class="form-label"
                >Profession pere</label
              >
              <div *ngIf="professionList$ | async as fonctionList; else loader">
                <input
                  type="text"
                  class="form-control form-select"
                  (click)="eleveForm.get('ProfessionPere')?.setValue('')"
                  #fonctionInput2
                  [matAutocomplete]="professionpere"
                  formControlName="ProfessionPere"
                />
                <mat-autocomplete #professionpere>
                  <mat-option
                    *ngFor="
                      let item of filterElement(
                        fonctionList,
                        fonctionInput2.value,
                        'Fr_Libelle'
                      )
                    "
                    (click)="
                      eleveForm
                        .get('ProfessionPere')
                        ?.setValue(item.Fr_Libelle);
                      eleveForm
                        .get('IDProfessionPere')
                        ?.setValue(item.IDPROFESSION)
                    "
                    >{{ item.Fr_Libelle }}</mat-option
                  >
                </mat-autocomplete>
              </div>
            </div>

            <div class="col-lg-3">
              <label for="validationCustom01" class="form-label"
                >Email pere</label
              >
              <input
                [readonly]="action == 'view'"
                type="text"
                class="form-control"
                formControlName="EmailPere"
              />
            </div>

            <div class="col-lg-3">
              <label for="validationCustom01" class="form-label"
                >Téléphone père</label
              >
              <input
                [readonly]="action == 'view'"
                type="text"
                class="form-control"
                formControlName="TelMobilePere"
                [ngClass]="{
                  'is-valid': eleveForm.controls['TelMobilePere'].valid,
                  'is-invalid': !eleveForm.controls['TelMobilePere'].valid
                }"
              />
              <div
                [ngClass]="{
                  'valid-feedback':
                    eleveForm.controls['TelMobilePere'].valid,
                  'invalid-feedback':
                    !eleveForm.controls['TelMobilePere'].valid
                }"
              >
                {{
                  !eleveForm.controls["TelMobilePere"].valid
                    ? "Renseignez le tel. mobile du père."
                    : "ok."
                }}
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-lg-3">
              <label for="validationCustom01" class="form-label"
                >Nom Prenom mère</label
              >
              <input
                [readonly]="action == 'view'"
                type="text"
                class="form-control text-capitalize"
                formControlName="Fr_NomPrenomMere"
                [ngClass]="{
                  'is-valid': eleveForm.controls['Fr_NomPrenomMere'].valid,
                  'is-invalid': !eleveForm.controls['Fr_NomPrenomMere'].valid
                }"
              />
              <div
                [ngClass]="{
                  'valid-feedback':
                    eleveForm.controls['Fr_NomPrenomMere'].valid,
                  'invalid-feedback':
                    !eleveForm.controls['Fr_NomPrenomMere'].valid
                }"
              >
                {{
                  !eleveForm.controls["Fr_NomPrenomMere"].valid
                    ? "Renseignez le nom et prénom de la mère."
                    : "ok."
                }}
              </div>
            </div>

            <div class="col-lg-3">
              <label for="validationCustom01" class="form-label"
                >Profession mère
              </label>
              <div *ngIf="professionList$ | async as fonctionList; else loader">
                <input
                  type="text"
                  class="form-control form-select"
                  (click)="eleveForm.get('ProfessionMere')?.setValue('')"
                  #fonctionInput3
                  [matAutocomplete]="professionmere"
                  formControlName="ProfessionMere"
                />
                <mat-autocomplete #professionmere>
                  <mat-option
                    *ngFor="
                      let item of filterElement(
                        fonctionList,
                        fonctionInput3.value,
                        'Fr_Libelle'
                      )
                    "
                    (click)="
                      eleveForm
                        .get('ProfessionMere')
                        ?.setValue(item.Fr_Libelle);
                      eleveForm
                        .get('IDProfessionMere')
                        ?.setValue(item.IDPROFESSION)
                    "
                    >{{ item.Fr_Libelle }}</mat-option
                  >
                </mat-autocomplete>
              </div>
            </div>

            <div class="col-lg-3">
              <label for="validationCustom01" class="form-label"
                >Email mère</label
              >
              <input
                [readonly]="action == 'view'"
                type="text"
                class="form-control"
                formControlName="EmailMere"
              />
            </div>

            <div class="col-lg-3">
              <label for="validationCustom01" class="form-label"
                >Téléphone mère</label
              >
              <input
                [readonly]="action == 'view'"
                type="text"
                class="form-control"
                formControlName="TelMobileMere"
                [ngClass]="{
                  'is-valid': eleveForm.controls['TelMobileMere'].valid,
                  'is-invalid': !eleveForm.controls['TelMobileMere'].valid
                }"
              />
              <div
                [ngClass]="{
                  'valid-feedback':
                    eleveForm.controls['TelMobileMere'].valid,
                  'invalid-feedback':
                    !eleveForm.controls['TelMobileMere'].valid
                }"
              >
                {{
                  !eleveForm.controls["TelMobileMere"].valid
                    ? "Renseignez le tel. mobile de la mère."
                    : "ok."
                }}
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-lg-3">
              <label for="validationCustom01" class="form-label"
                >Nombre Freres</label
              >
              <input
                [readonly]="action == 'view'"
                type="number"
                class="form-control"
                formControlName="NombreFreres"
              />
            </div>

            <div class="col-lg-3">
              <label for="validationCustom01" class="form-label"
                >Nombre Soeurs</label
              >
              <input
                [readonly]="action == 'view'"
                type="number"
                class="form-control"
                formControlName="NombreSoeurs"
              />
            </div>

            <div class="col-lg-3">
              <label for="validationCustom01" class="form-label"
                >Situation Sociale
              </label>
              <input
                [readonly]="action == 'view'"
                type="text"
                class="form-control form-select"
                disabled
              />
            </div>
            <div class="col-lg-3">
              <div class="">
                <label for="validationCustom01" class="form-label"
                  >Adresse (<span class="text-danger">*</span>)
                </label>
                <input
                  [readonly]="action == 'view'"
                  type="text"
                  class="form-control"
                  formControlName="Fr_Adresse1"
                  [ngClass]="{
                    'is-valid': eleveForm.controls['Fr_Adresse1'].valid,
                    'is-invalid': !eleveForm.controls['Fr_Adresse1'].valid
                  }"
                />
                <div
                  [ngClass]="{
                    'valid-feedback': eleveForm.controls['Fr_Adresse1'].valid,
                    'invalid-feedback': !eleveForm.controls['Fr_Adresse1'].valid
                  }"
                >
                  {{
                    !eleveForm.controls["Fr_Adresse1"].valid
                      ? "Renseignez l'adresse."
                      : "ok."
                  }}
                </div>
              </div>
            </div>
          </div>

        </form>
        <div class="mt-5 d-flex justify-content-end">
          <button mat-button matStepperPrevious>
            <i class="fa-solid fa-angle-double-left text-secondary-cust"></i>
            <span class="text-secondary-cust">Précédant</span>
          </button>
        </div>
        <button
          type="submit"
          [disabled]="isLoading || eleveForm.invalid"
          class="btn-custom bg-table-color text-white btn w-100"
          (click)="onSubmitForm()"
        >
          <span *ngIf="!isLoading; else loader"></span>
          <i class="fa-solid fa-check text-light"></i>
          {{ eleveID ? "Valide la réinscription" : "Valider l'inscription" }}
        </button>
      </mat-step>
    </mat-stepper>
  </div>
</app-gabarit>
<ng-template #loader>
  <app-loader></app-loader>
</ng-template>
