<app-gabarit-parent pageTitle="ESPACE PARENT">
  <div class="col-lg-11 shadow bg-light rounded rounded-5 p-4 border m-lg-auto">
    <div class="row">
      <div style="border-bottom: 1px solid rgb(209, 204, 204)">
        <div class="row">
          <div class="col-lg-4 pt-2">
            <p class="fs-6 fw-bold">
              <span
                >{{ parent.Etable.NomEtab }}/{{ parent.Etable.CodeEtab }}</span
              >
            </p>
            <p class="fs-6">
              <span class="fw-bold">Adresse : </span>
              <span>{{ parent.Etable.Adresse1 }}</span>
            </p>
            <p class="fs-6">
              <span class="fw-bold">Téléphone : </span>
              <span>{{ parent.Etable.Telephone }}</span>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="col-lg-11 bg-light rounded rounded-5 shadow m-lg-auto"
    style="margin-top: 20px !important"
  >
    <div class="row" *ngIf="!isLoading; else loader">
      <div
        *ngFor="let element of Famille"
        class="col-lg-6 col-md-6 pointer block-content"
      >
        <div
          class="row border p-2 rounded rounded-5"
          style="border: 1px solid #fa8d00"
        >
          <div class="col-4 p-0" style="padding-top: 10px">
            <div
            style="height: 150px"
            class="w-100"
            *ngIf="!isloadphoto; else loader"
              (click)="onBlockClick(element)"
            >
              <img
                class="w-100 img-fluid"
                [src]="element.Photo"
                alt="Photo de l'élève"
                style="
                object-fit: contain;
                width: 100em;
                height: 100%;
              "
              />
            </div>
          </div>

          <div class="col-8 text-start">
            <div
              (click)="onBlockClick(element)"
              class="text-start blockinfo fw-bold pt-3"
            >
              <p class="d-none d-lg-block">
                <span>Matricule: </span>
                <span>{{ element.Metricule }}</span>
              </p>
              <p>
                <span>Nom: </span> <span>{{ element.Nom }}</span>
              </p>
              <p>
                <span>Prénom: </span> <span>{{ element.Prenom }}</span>
              </p>
              <p class="d-none d-lg-block">
                <span>Date de naiss: </span>
                <span>{{ convertToValideDates(element.DateNaissance) }}</span>
              </p>
              <p class="d-none d-lg-block">
                <span>Lieu de naiss: </span>
                <span>{{ element.LieuNaissance }}</span>
              </p>
              <p>
                <span>Classe: </span> <span>{{ element.Classe }}</span>
              </p>
            </div>
            <div>
              <div class="col-lg-12 p-0">
                <div class="row">
                  <div class="col-lg-6">
                    <p
                      class="p-2 text-center rounded text-white rounded-5"
                      (click)="reabonnement(element)"
                      [ngStyle]="{ 'background-color': element.CouleurLigne }"
                    >
                      {{
                        element.bAbonnementValide == true
                          ? "Abonnement en cours"
                          : "Abonnement expiré"
                      }}
                    </p>
                  </div>
                  <div class="col-lg-6">
                    <button
                      (click)="deleteEleve(element)"
                      class="form-control rounded rounded-5 bg-danger text-white"
                    >
                      Supprimer <i class="fa-solid fa-trash"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="mt-3 mb-3">
    <div class="bg-light mt-4 row p-3 col-lg-11 m-lg-auto rounded rounded-5">
      <div class="col-lg-6 p-0">
        <button
          routerLink="/espace-parent/search-eleve-parent"
          style="background-color: #7c57ce"
          class="form-control rounded rounded-5 text-white pointer"
        >
          Ajouter un élève
        </button>
      </div>

      <div class="col-lg-6 p-0">
        <button
          style="background-color: #7c57ce"
          class="form-control rounded rounded-5 text-white pointer"
        >
          Pré-inscrire un élève
        </button>
      </div>
    </div>
  </div>
</app-gabarit-parent>
<ng-template #loader>
  <app-loader></app-loader>
  <p class="text-center">Chargement</p>
</ng-template>
