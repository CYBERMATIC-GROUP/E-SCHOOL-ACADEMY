<app-gabarit>
  <div class=" w-100 px-0 m-0">

    <div class="row pb-3">
      <div class="col-lg-3 d-none d-lg-inline">
        <aside class="border w-100 mb-2 shadow rounded px-2 pt-2 overflow-y-scroll" id="left-panel">
          <div id="bloc_notif" *ngIf="(notifications$ | async) as notifications; else loader">
              <app-notification *ngFor="let notif of notifications" [notification]="notif"></app-notification>
          </div>
        </aside>
      </div>

      <div class="col-12 col-lg-9 " id="principal">
        <div class="row" id="menus">
          <div class="col-12 "></div>
          <div class="col-12 col-md-6">
            <div class="info-box" routerLink="/agent">
              <div *ngIf="false" class="new-feature d-none d-md-block">Nouveauté <img src="../../assets/icons8-star.gif" alt="ico"></div>
              <span class="info-box-icon bg-warning">
                <img src="../../assets/logo/enseignant3.png" alt="">
              </span>
              <div class="info-box-content d-flex justify-content-start align-items-center">
                  <div>
                    <h2 class="mb-0 pt-3">Dossier des agents</h2>
                    <p *ngIf="stats; else infoStatsLoad">
                      <span class="text-success"><i class="fa-solid fa-restroom"></i> Total: {{ stats.Agents.nNbreDesAgents }}</span>
                      dont <span class="mx-3"><i class="fa-solid text-primary fa-male"></i> H: {{ stats.Agents.nNbreDesAgentsHommes }}</span>
                      <span class="text-danger"><i class="fa-solid fa-female"></i> F: {{ stats.Agents.nNbreDesAgentsFemmes }}</span>
                    </p>
                    <ng-template #infoStatsLoad>
                      <span>Chargement des statistiques...</span>
                    </ng-template>
                  </div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6">
            <div class="info-box" routerLink="/dossierEnseignant">
              <div *ngIf="false" class="new-feature d-none d-md-block">Nouveauté <img src="../../assets/icons8-star.gif" alt="ico"></div>
              <span class="info-box-icon bg-warning">
                <img src="../../assets/logo/enseignant3.png" alt="">
              </span>
              <div class="info-box-content d-flex justify-content-start align-items-center">
                  <div>
                    <h2 class="mb-0 pt-3">Dossier des enseignants</h2>
                    <p *ngIf="stats; else infoStatsLoad">
                      <span class="text-success"><i class="fa-solid fa-restroom"></i> Total: {{ stats.Enseignants.nNbreDesEngnants }}</span>
                      dont <span class="mx-3"><i class="fa-solid text-primary fa-male"></i> H: {{ stats.Enseignants.nNbreDesEngnantsHommes }}</span>
                      <span class="text-danger"><i class="fa-solid fa-female"></i> F: {{ stats.Enseignants.nNbreDesEngnantsFemmes }}</span>
                    </p>
                    <ng-template #infoStatsLoad>
                      <span>Chargement des statistiques...</span>
                    </ng-template>
                  </div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6">
            <div class="info-box"  routerLink="/dossierEleve">
              <div *ngIf="false" class="new-feature d-none d-md-block">Nouveauté <img src="../../assets/icons8-star.gif" alt="ico"></div>
              <span class="info-box-icon bg-success">
                <img src="../../assets/logo/student3.png" alt="">
              </span>
              <div class="info-box-content d-flex justify-content-start align-items-center">
                  <div>
                    <h2 class="mb-0 pt-3">Dossier des élèves</h2>
                    <p *ngIf="stats; else infoStatsLoad">
                      <span class="text-success"><i class="fa-solid fa-restroom"></i> Total: {{ stats.Eleves.nNbreDesEleves }}</span>
                      dont <span class="mx-3"><i class="fa-solid text-primary fa-male"></i> H: {{ stats.Eleves.nNbreDesElevesGar }}</span>
                      <span class="text-danger"><i class="fa-solid fa-female"></i> F: {{ stats.Eleves.nNbreDesElevesFilles }}</span>
                    </p>
                    <ng-template #infoStatsLoad>
                      <span>Chargement des statistiques...</span>
                    </ng-template>
                  </div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6">
            <div class="info-box" routerLink="/comptabilite">
              <div *ngIf="false" class="new-feature d-none d-md-block">Nouveauté <img src="../../assets/icons8-star.gif" alt="ico"></div>
              <span class="info-box-icon bg-green">
                <img src="../../assets/logo/Consultations_de_caisse.png" alt="">
              </span>
              <div class="info-box-content d-flex justify-content-start align-items-center">
                  <div>
                    <h2 class="mb-0 pt-3">Comptabilité</h2>
                    <span class="text-secondary">Gestion des caisses/comptes</span>
                  </div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6">
            <div class="info-box" routerLink="/notes">
              <div *ngIf="false" class="new-feature d-none d-md-block">Nouveauté <img src="../../assets/icons8-star.gif" alt="ico"></div>
              <span class="info-box-icon bg-aqua">
                <img src="../../assets/logo/resultat_scolaire.png" alt="">
              </span>
              <div class="info-box-content d-flex justify-content-start align-items-center">
                  <div>
                    <h2 class="mb-0 pt-3">Scolarité et SMS</h2>
                    <span class="text-primary">Saisie notes/Bulletins...</span>
                  </div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6">
            <div class="info-box" routerLink="/planning">
              <div *ngIf="false" class="new-feature d-none d-md-block">Nouveauté <img src="../../assets/icons8-star.gif" alt="ico"></div>
              <span class="info-box-icon bg-primary">
                <img src="../../assets/logo/Planning.png" alt="">
              </span>
              <div class="info-box-content d-flex justify-content-start align-items-center">
                  <div>
                    <h2 class="mb-0 pt-3">Planning</h2>
                    <span class="text-primary">Repartition/Emploi du temps/...</span>
                  </div>
              </div>
            </div>
          </div>



          <div class="col-12 col-md-6">
            <div class="info-box" routerLink="/impression">
              <div *ngIf="false" class="new-feature d-none d-md-block">Nouveauté <img src="../../assets/icons8-star.gif" alt="ico"></div>
              <span class="info-box-icon bg-secondary-cust">
                <img src="../../assets/logo/Planning.png" alt="">
              </span>
              <div class="info-box-content d-flex justify-content-start align-items-center">
                  <div>
                    <h2 class="mb-0 pt-3">Impression & rapports</h2>
                    <span style="color: #7b4bce;">Liste/Bulletin/...</span>
                  </div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6">
            <div class="info-box" routerLink="/statistiques">
              <div class="new-feature d-none d-md-block">Nouveauté <img src="../../assets/icons8-star.gif" alt="ico"></div>
              <span class="info-box-icon bg-secondary-cust">
                <img src="../../assets/logo/48X48/A1 (12).png" alt="">
              </span>
              <div class="info-box-content d-flex justify-content-start align-items-center">
                  <div>
                    <h2 class="mb-0 pt-3">Statistiques</h2>
                    <span style="color: #7b4bce;">Proportions/Fréquences/...</span>
                  </div>
              </div>
            </div>
          </div>

        </div>

        <div class="row mb-4" id="graphics">
          <div class="col-md-6">
            <div class=" border shadow bg-light rounded px-3" *ngIf="eleveParNiveaux">
              <app-students-by-class [statsObj]="eleveParNiveaux" keyCount="nNbreEleve" keyLabel="CocdeNiveau" title="Effectif des élèves par niveau" headTitle="Effectif des élèves par niveau"></app-students-by-class>
            </div>
          </div>
          <div class="col-md-6 ">
            <div class=" border shadow bg-light rounded px-3" *ngIf="eleveParBranche">
              <app-students-by-class [statsObj]="eleveParBranche" keyCount="nNbreEleve" keyLabel="CocdeBranche" title="Effectif des élèves par branche" headTitle="Effectif des élèves par branche"></app-students-by-class>
            </div>
          </div>
        </div>

        <div class="row border shadow info-box rounded pt-3 my-3" id="graphics-2" style="margin-inline: 0.05em;">

          <div class="pb-3 height-t" *ngIf="eleveParClasse; else loaderStat">
            <app-students-by-class [statsObj]="eleveParClasse" keyCount="nNbreEleve" keyLabel="CocdeClasse" title="Effectif des élèves par classe" headTitle="Effectif des élèves par classe"></app-students-by-class>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--app-notification></app-notification-->
</app-gabarit>

<ng-template #loader>
  <app-loader></app-loader>
</ng-template>

<ng-template #loaderStat>
  <div class="col">
    <p class="text-dark text-center w-100"> <app-loader></app-loader> Chargement des données statistiques...</p>
  </div>
</ng-template>

